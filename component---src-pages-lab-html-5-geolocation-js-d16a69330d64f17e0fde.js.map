{"version":3,"sources":["webpack:///./src/pages/lab/html5-geolocation.js"],"names":["ERROR_TPYE","1","2","3","HTML5Geolocation","props","useState","latitude","setLatitude","longitude","setLongitude","accuracy","setAccuracy","altitude","setAltitude","altitudeAccuracy","setAltitudeAccuracy","heading","setHeading","speed","setSpeed","error","setError","useEffect","navigator","geolocation","getCurrentPosition","position","coords","code","enableHighAcuracy","title","keywords","data","site","siteMetadata","className","to","id","query"],"mappings":"8LAOMA,G,cAAa,CACjBC,EAAG,iBACHC,EAAG,iCACHC,EAAG,YA+DUC,UA5DU,SAACC,GAA4B,IAAD,EACnBC,mBAAS,MADU,mBAC5CC,EAD4C,KAClCC,EADkC,OAEjBF,mBAAS,MAFQ,mBAE5CG,EAF4C,KAEjCC,EAFiC,OAGnBJ,mBAAS,MAHU,mBAG5CK,EAH4C,KAGlCC,EAHkC,OAInBN,mBAAS,MAJU,mBAI5CO,EAJ4C,KAIlCC,EAJkC,OAKHR,mBAAS,MALN,mBAK5CS,EAL4C,KAK1BC,EAL0B,OAMrBV,mBAAS,MANY,mBAM5CW,EAN4C,KAMnCC,EANmC,OAOzBZ,mBAAS,MAPgB,mBAO5Ca,EAP4C,KAOrCC,EAPqC,OAQzBd,mBAAS,IARgB,mBAQ5Ce,EAR4C,KAQrCC,EARqC,KAgCnD,OAtBAC,qBAAU,WACJC,UAAUC,YACZD,UAAUC,YAAYC,oBACpB,SAAAC,GAEEnB,EAAYmB,EAASC,OAAOrB,UAC5BG,EAAaiB,EAASC,OAAOnB,WAC7BG,EAAYe,EAASC,OAAOjB,UAC5BG,EAAYa,EAASC,OAAOf,UAC5BG,EAAoBW,EAASC,OAAOb,kBACpCG,EAAWS,EAASC,OAAOX,SAC3BG,EAASO,EAASC,OAAOT,UAC3B,SAAAE,GACEC,EAAS,WAAatB,EAAWqB,EAAMQ,SAEzC,CAAEC,mBAAmB,IAGvBR,EAAS,2DAEV,IAGD,kBAAC,IAAD,KACE,kBAAC,IAAD,CACES,MAAM,oBACNC,SAAU3B,EAAM4B,KAAKC,KAAKC,aAAaH,WAEzC,yBAAKI,UAAU,uBAEb,iCACE,kBAAC,OAAD,CAAMC,GAAG,OAAOD,UAAU,QAA1B,UAEA,2CAEA,wCAAc7B,GACd,0CAAgBE,GAChB,wCAAcE,GACd,wCAAcE,GACd,iDAAuBE,GACvB,uCAAaE,GACb,qCAAWE,GAEX,uBAAGmB,GAAG,SAASjB,OAQlB,IAAMkB,EAAK,c","file":"component---src-pages-lab-html-5-geolocation-js-d16a69330d64f17e0fde.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, graphql } from 'gatsby'\nimport Layout from '../../components/layout'\nimport SEO from '../../components/seo'\nimport './lab.scss'\nimport { GatsbyDataProps } from '../../utils/interface'\n\nconst ERROR_TPYE = {\n  1: 'service denied',\n  2: 'cannot access geolocation info',\n  3: 'timeout'\n}\n\nconst HTML5Geolocation = (props: GatsbyDataProps) => {\n  const [latitude, setLatitude] = useState(null)\n  const [longitude, setLongitude] = useState(null)\n  const [accuracy, setAccuracy] = useState(null)\n  const [altitude, setAltitude] = useState(null)\n  const [altitudeAccuracy, setAltitudeAccuracy] = useState(null)\n  const [heading, setHeading] = useState(null)\n  const [speed, setSpeed] = useState(null)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          // 经纬度数值为正数表示东经、北纬，负数表示西经南纬，遵循直角坐标系\n          setLatitude(position.coords.latitude)\n          setLongitude(position.coords.longitude)\n          setAccuracy(position.coords.accuracy)\n          setAltitude(position.coords.altitude)\n          setAltitudeAccuracy(position.coords.altitudeAccuracy)\n          setHeading(position.coords.heading)\n          setSpeed(position.coords.speed)        },\n        error => {\n          setError('[Error] ' + ERROR_TPYE[error.code])\n        },\n        { enableHighAcuracy: true }\n      )\n    } else {\n      setError('[Error] Geolocation is not supported on this browser.')\n    }\n  }, [])\n\n  return (\n    <Layout>\n      <SEO\n        title='Geolocation | 实验室'\n        keywords={props.data.site.siteMetadata.keywords}\n      />\n      <div className='mf-content lab-item'>\n\n        <article>\n          <Link to='/lab' className='back'>&laquo; Back</Link>\n\n          <h1>Geolocation</h1>\n\n          <p>Latitude: {latitude}</p>\n          <p>Longtitude: {longitude}</p>\n          <p>Accuracy: {accuracy}</p>\n          <p>Altitude: {altitude}</p>\n          <p>Altitude Accuracy: {altitudeAccuracy}</p>\n          <p>Heading: {heading}</p>\n          <p>Speed: {speed}</p>\n\n          <p id='error'>{error}</p>\n        </article>\n      </div>\n    </Layout>\n  )\n}\n\nexport default HTML5Geolocation\nexport const query = graphql`\nquery {\n  site {\n    siteMetadata {\n      title,\n      keywords\n    }\n  }\n}`\n"],"sourceRoot":""}