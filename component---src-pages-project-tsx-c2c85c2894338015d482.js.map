{"version":3,"sources":["webpack:///./src/pages/project.tsx"],"names":["ProjectCatalog","props","data","projects","allMarkdownRemark","edges","map","n","node","filter","fields","type","NodeType","project","IS_PROD","frontmatter","draft","sort","x","y","Date","from","getTime","commercialProjects","category","personalProjects","visibleProjects","length","push","title","totalCount","reduce","keywords","site","siteMetadata","className","item","key","cover","publicURL","to","slug","id","src","alt","description","query"],"mappings":"qHAAA,kIAiEeA,UA1D6B,SAACC,GAAU,IAC7CC,EAASD,EAATC,KAEFC,EADQD,EAAKE,kBAAkBC,MAAMC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,QAEnDC,QAAO,SAAAD,GAAI,OAAIA,EAAKE,OAAOC,OAASC,IAASC,WAC7CJ,QAAO,SAAAD,GAAI,OAAKM,MAAYN,EAAKO,YAAYC,SAC7CC,MAAK,SAACC,EAAGC,GAAJ,OAAU,IAAIC,KAAKD,EAAEJ,YAAYM,MAAMC,UAAY,IAAIF,KAAKF,EAAEH,YAAYM,MAAMC,aAGlFC,EAAqBpB,EAASM,QAAO,SAAAD,GAAI,MAAkC,eAA9BA,EAAKO,YAAYS,YAC9DC,EAAmBtB,EAASM,QAAO,SAAAD,GAAI,MAAkC,aAA9BA,EAAKO,YAAYS,YAE5DE,EAAkB,GACpBH,EAAmBI,QACrBD,EAAgBE,KAAK,CAAEC,MAAO,OAAQ3B,KAAMqB,IAE1CE,EAAiBE,QACnBD,EAAgBE,KAAK,CAAEC,MAAO,OAAQ3B,KAAMuB,IAG9C,IAAMK,EAAaJ,EAAgBpB,KAAI,SAAAC,GAAC,OAAIA,EAAEL,KAAKyB,UAAQI,QAAO,SAACb,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GAEnF,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEU,MAAM,KACNG,SAAU9B,EAAK+B,KAAKC,aAAaF,WAEnC,yBAAKG,UAAU,8BACb,wBAAIA,UAAU,SAAd,QAA4BL,EAA5B,KACEJ,EAAgBpB,KAAI,SAAA8B,GAAI,OACxB,kBAAC,WAAD,CAAUC,IAAKD,EAAKP,OAClB,wBAAIM,UAAU,0BACXC,EAAKP,MADR,KACiBO,EAAKlC,KAAKyB,OAD3B,KAGA,yBAAKQ,UAAU,gBACXC,EAAKlC,KAAKI,KAAI,SAAAE,GAAQ,MAChB8B,EAAK,UAAG9B,EAAKO,YAAYuB,aAApB,aAAG,EAAwBC,UACtC,OACE,kBAAC,OAAD,CAAMJ,UAAW,WAAa3B,EAAKO,YAAYC,MAAQ,SAAW,IAAKwB,GAAIhC,EAAKE,OAAO+B,KAAMJ,IAAK7B,EAAKE,OAAO+B,KAAMC,GAAIlC,EAAKE,OAAOgC,IAClI,yBAAKP,UAAU,SACb,yBAAKQ,IAAKL,EAAOM,IAAI,MAEvB,yBAAKT,UAAU,SACb,4BAAK3B,EAAKO,YAAYc,OACtB,2BAAIrB,EAAKO,YAAY8B,0BAepC,IAAMC,EAAQ","file":"component---src-pages-project-tsx-c2c85c2894338015d482.js","sourcesContent":["import React, { Fragment, FC } from 'react'\nimport { Link, graphql } from 'gatsby'\nimport { Layout, SEO } from '../components'\nimport './project.scss'\nimport { GatsbyDataProps, ProjectNode, NodeType } from '../utils/interface'\nimport { IS_PROD } from 'config'\n\nconst ProjectCatalog: FC<GatsbyDataProps> = (props) => {\n  const { data } = props\n  const nodes = data.allMarkdownRemark.edges.map(n => n.node) as ProjectNode[]\n  const projects = nodes\n    .filter(node => node.fields.type === NodeType.project)\n    .filter(node => !IS_PROD || !node.frontmatter.draft)\n    .sort((x, y) => new Date(y.frontmatter.from).getTime() - new Date(x.frontmatter.from).getTime())\n\n  // 商业项目和个人项目分开\n  const commercialProjects = projects.filter(node => node.frontmatter.category === 'commercial')\n  const personalProjects = projects.filter(node => node.frontmatter.category === 'personal')\n\n  const visibleProjects = []\n  if (commercialProjects.length) {\n    visibleProjects.push({ title: '商业作品', data: commercialProjects })\n  }\n  if (personalProjects.length) {\n    visibleProjects.push({ title: '个人作品', data: personalProjects })\n  }\n\n  const totalCount = visibleProjects.map(n => n.data.length).reduce((x, y) => x + y, 0)\n\n  return (\n    <Layout>\n      <SEO\n        title='项目'\n        keywords={data.site.siteMetadata.keywords}\n      />\n      <div className='mf-content project-catalog'>\n        <h1 className='title'>代表作 ({totalCount})</h1>\n        { visibleProjects.map(item =>\n          <Fragment key={item.title}>\n            <h2 className='project-category-title'>\n              {item.title} ({item.data.length})\n            </h2>\n            <div className='project-list'>\n              { item.data.map(node => {\n                const cover = node.frontmatter.cover?.publicURL\n                return (\n                  <Link className={'project' + (node.frontmatter.draft ? ' draft' : '')} to={node.fields.slug} key={node.fields.slug} id={node.fields.id}>\n                    <div className='cover'>\n                      <img src={cover} alt='' />\n                    </div>\n                    <div className='intro'>\n                      <h2>{node.frontmatter.title}</h2>\n                      <p>{node.frontmatter.description}</p>\n                    </div>\n                  </Link>\n                )\n              })}\n            </div>\n          </Fragment>\n        )}\n      </div>\n    </Layout>\n  )\n}\n\nexport default ProjectCatalog\n\nexport const query = graphql`\nquery {\n  site {\n    siteMetadata {\n      title,\n      keywords\n    }\n  }\n  allMarkdownRemark(sort: { fields: [frontmatter___from], order: DESC }) {\n    totalCount\n    edges {\n      node {\n        id\n        frontmatter {\n          title\n          description\n          cover {\n            publicURL\n          }\n          from\n          to\n          draft\n          category\n        }\n        fields {\n          id\n          slug\n          type\n        }\n      }\n    }\n  }\n}`\n"],"sourceRoot":""}