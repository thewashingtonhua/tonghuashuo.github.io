{"data":{"site":{"siteMetadata":{"title":"童话说","keywords":["tonghuashuo","github","front-end","javascript","typescript","react","node","washington","hua","童话","童话说","前端","博客","技术","计算机","互联网"]}},"markdownRemark":{"html":"<h2>杂谈</h2>\n<p>不知道是就我这样，还是大家也是，最近的内容圈子里关于 TypeScript 的文章满天飞，各种 TypeScript 有多好、多受欢迎，要不就是 TypeScript 的教程、实践。偏偏我在这时候有了写这篇文章的想法，搞得很有跟风蹭热度的嫌疑。</p>\n<p>作为一名坚持原创的作者，我并不想把市面上随手可得的东西，换一种方式再讲给大家听，这样不仅是在浪费大家的时间，也是在浪费我自己的时间。我所理解的为社区做贡献，应该是能够填补当前环境下的一些空白，去做一些真正有意义的事，而不是摆出一副资深的样子，去转发或是创造一些重复的内容。</p>\n<p>今天这篇文章，虽然有跟风的嫌疑，但我向你保证，内容依然是绝对的原创。如有巧合，那么英雄所见略同。</p>\n<h2>为什么是次日？</h2>\n<p>上手 TypeScript 并不难，有 JavaScript 基础的同学，花个一天时间过一遍文档，基本就都清楚了。如果你刚好还有 Java、C# 等后端语言的基础，那么其中关于 OOP 的一些概念相信你一定会觉得非常眼熟。</p>\n<p>如果你刚看完文档就开始准备把 TypeScript 用到项目中去，那么恭喜你，你很快就会遇到各种坑，而且你无法直接从文档中寻找到对应的解决方案。这篇文章的存在，就是希望能够填补这中间的空白，帮助各位顺利的把 TypeScript 落地到项目中。</p>\n<p>这便是标题中「次日」的由来。如果你还没有看过 TypeScript 的文档，那么这篇文章现在还不适合你，建议先收藏起来，等看完了文档再回来。</p>\n<p>如果你已经准备好了，那么我们开始吧。</p>\n<h2>你或许并不需要 TypeScript</h2>\n<p>每个人接触 TypeScript 的原因不同，有的是被人安利，有的是因为团队在用，有的是因为用了 Angular。但不管因为什么入了这个坑，我们都需要明白：TypeScript 并非必须。</p>\n<p>TypeScript 适合大型项目，小型项目最好还是继续用 JavaScript。这已经是业内的一个共识。</p>\n<p>TypeScript 可以简单理解为 JavaScript + Types。从工程效率的角度上讲，Types 的部分属于额外的工作量，如果不能给项目带来足够的收益，去平衡掉其引入的成本，那么这项投入就不是很值得。</p>\n<p>如果只是官网之类的小型项目，类型不类型的并不重要，没必要为了用 TypeScript 而用 TypeScript。但随着项目的规模和复杂度的增加，代码质量、沟通成本等问题开始浮现，而这恰恰是类型系统能够解决的问题。通过类型检测，我们可以更早的发现潜在的类型错误，进行主动防御，进而提高代码质量；通过类型定义，我们可以更加直观的描述我们的数据结构，降低团队作业中的沟通成本。</p>\n<p>因此，要不要用 TypeScript，取决于你项目的类型以及规模，不要盲目跟风。</p>\n<h2>别忘了 jsDoc</h2>\n<p>很多人对 TypeScript 有一个误解，觉得有了静态类型的代码已经足够「自解释」，就不需要 jsDoc 一类的注释了。</p>\n<p>静态类型描述的是数据的结构，而注释描述的是数据的作用，两者解决的是不同的问题，彼此之间并不冲突。</p>\n<p>比如下面这段 JavaScript 代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-js line-numbers\"><code class=\"gatsby-code-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">convert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// some code</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>不难看出这是一个转换函数，接收一个待转换的值，以及一个配置对象，但我们并不是这个函数用来转换什么，配置对象又有哪些参数。</p>\n<p>现在我们用 TypeScript 来重写一下，补充一些类型定义。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-ts line-numbers\"><code class=\"gatsby-code-ts\"><span class=\"token keyword\">function</span> <span class=\"token function\">convert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">?</span> <span class=\"token punctuation\">:</span><span class=\"token builtin\">boolean</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// some code</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>现在我们知道了这是一个用于处理字符串的转换函数，配置对象有两个参数，一个是必选的字符串，一个是可选的布尔值，最后返回的也是一个字符串。但具体到业务中，这个函数用来转换什么样的字符串，我们还是不太清楚。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre style=\"counter-reset: linenumber NaN\" class=\"gatsby-code-ts line-numbers\"><code class=\"gatsby-code-ts\"><span class=\"token comment\">/**\n * @description 对手机号进行编码，隐藏其中一部分，如：13812345678 -> 138****5678\n * @param val 待编码的手机号\n * @param config 配置选项\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">convert</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">?</span> <span class=\"token punctuation\">:</span><span class=\"token builtin\">boolean</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// some code</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>加上注释之后，一切就都清楚了：这是一个对手机号进行编码，将其中一部分替换成其他字符，以保护用户隐私的函数。</p>\n<p>所以你看，TypeScript 并不能完全替代 jsDoc 的作用，该写的注释还是得写。</p>\n<p>当然对于上面的例子，如果是一个单纯的工具函数，我们完全可以使用更加直观的命名，比如 <code class=\"gatsby-code-text\">encodeMobile (mobile, config)</code>，但如果这是某个类中的成员函数，那么可能就不可避免地会出现示例中的写法。总之，你明白我的意思就好，就不要钻牛角尖了。</p>\n<p>对了，得益于 TypeScript 的类型系统，<code class=\"gatsby-code-text\">@param</code> 不需要再指定数据类型了，只要对变量的用途进行描述就好了。如果你配置了 Lint 工具，它也会提醒你优先使用 TypeScript 来定义类型，不要重复定义。</p>\n<h2>TSX 和 JSX</h2>\n<p>之前我们在用 JavaScript 写 React 时，对文件的扩展名没有什么特别的要求，<code class=\"gatsby-code-text\">*.js</code> 或者 <code class=\"gatsby-code-text\">*.jsx</code> 都行。</p>\n<p>但在 TypeScript 中，如果你要使用 JSX 语法，就不能使用 <code class=\"gatsby-code-text\">*.ts</code>，必须使用 <code class=\"gatsby-code-text\">*.tsx</code>。如果你不知道，或者忘了这么做，那么你会在使用了 JSX 代码的地方收到类型报错，但代码本身怎么看都没有问题。这也是刚上手 TypeScript + React 时几乎每个人都会遇到的坑。</p>\n<p>关于这一点，TypeScript 只是在官方教程的示例代码中直接用了 <code class=\"gatsby-code-text\">*.tsx</code>，但并没有明确说明这一问题。</p>\n<p>React 则在它的官方文档中说明了这一规则：</p>\n<blockquote>\n<p>In React, you most likely write your components in a <code class=\"gatsby-code-text\">.js</code> file. In TypeScript we have 2 file extensions:</p>\n<p><code class=\"gatsby-code-text\">.ts</code> is the default file extension while <code class=\"gatsby-code-text\">.tsx</code> is a special extension used for files which contain JSX.</p>\n</blockquote>\n<blockquote>\n<p>在使用 React 时，我们通常会把组件写在一个 <code class=\"gatsby-code-text\">.*js</code> 文件里。在 TypeScript 中我们有两种文件扩展名：</p>\n<p><code class=\"gatsby-code-text\">.ts</code> 是默认的文件扩展名，而 <code class=\"gatsby-code-text\">.tsx</code> 是用于包含了 JSX 的文件的特殊扩展名。</p>\n</blockquote>\n<p>其实上面这段话也没有明说在 <code class=\"gatsby-code-text\">*.ts</code> 中使用 JSX 会报错，所以即便有人看到了这段话，可能也以为只是像 <code class=\"gatsby-code-text\">*.jsx</code> 一样多了一种选择，并没有太当回事……直到遇到问题。</p>\n<h2>变量的 Type 怎么找</h2>\n<p>上手 TypeScript 之后很快我们就发现，即便是原生的 DOM、或是 React 的 API，也经常会要我们手动指定类型。但这些结构并不是简单的 JavaScript 原始类型，在使用 JavaScript 编写相关代码时候由于没有这种需要，我们也没关心过这些东西的类型，突然问起来，还真不知道这些类型叫什么名字。</p>\n<p>不光是这些标准类型，同样的问题在很多第三方的库中也会遇到，比如一些组件库会检查你传入的 Props。</p>\n<p>在我看来，这中间其实缺少了一部分的文档，来指导新用户如何找到所需要的类型。既然社区没有提供，那就我来吧。</p>\n<p>当然，让每个开发者都熟记所有的类型肯定是不现实的，总不能每接触一个新的库，就要去记一堆类型吧。放心，世界还是美好的，这种事情，当然是有方法的。</p>\n<p>最直白的方法就是去看库的 Types Definition，也就是那些 <code class=\"gatsby-code-text\">.*d.ts</code> 文件。如果你刚好有在用 VS Code 的话，有一个非常方便的操作：把鼠标移动到你想知道它类型的代码上（比如某个变量、某个函数调用，或是某个 JSX 标签、某个组件的 props），右键选择「Go to Definition」（或者光标选中后按 F12），就可以跳转到它的类型定义文件了。</p>\n<p>如果你更习惯使用 VS Code 之外的编辑器，我相信时至今日，它们应该也都早就对 TypeScript 提供了支持。具体操作我不太熟悉，你可以自己探索下（我一直用 VS Code，其它的不太熟）。</p>\n<p>一般来说，这个操作可以直接把你带到你想要的地方，但考虑到类型是可以继承的，有时候一次跳转可能不太够，遇到这种情况，那就需要你随机应变一下，沿着继承关系多跳几次，直到找到你想要的内容。</p>\n<p>对于不熟悉的类型，可以通过这个方法去寻找，慢慢熟悉以后，你会发现，一些常见的类型还是很好找的，稍微联想一下英文的表达方式，配合自动补全的提示，一般都不难找到。</p>\n<p>为了方便初学者，我们还是稍微列举一些常见的类型，找找感觉：</p>\n<h3>常见 Types 之 DOM</h3>\n<p>TypeScript 自带了一些基本的类型定义，包括 ECMAScript 和 DOM 的类型定义，所有你需要的类型都可以从这里找到。如果你想做一些「纯 TypeScript 开发」的话，有这些就够了。</p>\n<p>比如下面这张截图，就是对 <code class=\"gatsby-code-text\">&lt;div&gt;</code> 标签的类型定义。我们可以看到，它继承了更加通用的 <code class=\"gatsby-code-text\">HTMLElement</code> 类型，并且扩展了一个即将被废弃的 <code class=\"gatsby-code-text\">align</code> 属性，以及两组 <code class=\"gatsby-code-text\">addEventListener</code> 和 <code class=\"gatsby-code-text\">removeEventListener</code>，注意这里使用了重载。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/5c8c8/types-dom.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.94409937888199%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACI0lEQVQ4y41TyZabMBDkKzIGxL4Ys28GY3vGmcy85Jr//5lKtcCxL5OXQz21Gqm6VV0Yh25GUs8oj1dk/QL/0CEqR64t7LhAkPfwsga7IMPO3+PFT/HNjb+EkdQjPF4Oqwlx2cHPO+47BAIh4ze/GBAUI8Ji1AVVUkGlT0geq5G1M9x9TTSIqwb74Yy4W5DNNxwIiVVGEiEqetgs6LJjJ13vOLwr8bqS8O3XbyTNxOo8nLVQFTtuZsQnkpEwYAFVHJmfYPKcVTPmZUU5VFL+hcgjMI6vH9SIRFIlKYhSH7bDfL0UlzoncGWV/b2jO9K1O004XN71kx22L5WE3G9PsMoBVr7qZUsHz938A0bLp7nb++0op4YzKikyXGAxLzmBIqyo0Fg7L3TOjh6xwOiW79oWIrQkwukV8e0nQuZdWimkZk5/hd1dEVBDrz3CZO6FMKl10o6wS+rfnWDTdsb09rl1yG5iEnKq6fKOkMNweSmilWz60qoYF7QS9yYnblIOk4OUyTt5q+URmQx7m5Yrg2HssVJw+QF/vMBhh7KPaC2ru0C1Z3Y8wG1G7OgG6VI1LNRQb3pV8ayhhaZ+YmCto+gm5OI1wstq+Gmp9VSMgz0Ht69gyYuYszbc47VDIRSSfIDXn4kJyXjl0z+RLB/saFmtRFjbqr7Ag5C6iNe8ekLQ8++RJ8+c9nSDQ23+1zrrk+k1/Rtt5tQ2ebKC3j+RfQW5+wdE+ppYEGogjwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types dom\"\n        title=\"\"\n        src=\"/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/f570d/types-dom.png\"\n        srcset=\"/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/0783d/types-dom.png 240w,\n/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/782f4/types-dom.png 480w,\n/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/f570d/types-dom.png 960w,\n/static/59ea3ce87ce94ba6ab5dbb8d600c0fe2/5c8c8/types-dom.png 1127w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>这里的命名也不是随便起的，都是在 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLDivElement\" target=\"_blank\" rel=\"noopener noreferrer\">MDN</a> 上可以查到的。</p>\n<p>还是以 <code class=\"gatsby-code-text\">&lt;div&gt;</code> 为例，我们已经知道它继承自 <code class=\"gatsby-code-text\">HTMLElement</code>，其实再往上，<code class=\"gatsby-code-text\">HTMLElement</code> 继承自 <code class=\"gatsby-code-text\">Element</code>，<code class=\"gatsby-code-text\">Element</code> 又继承自 <code class=\"gatsby-code-text\">Node</code>，顺着这条路，你可以挖掘出所有 HTML 标签的类型。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bfadf4ef868bc1446cd94511666171ee/1f27a/HTMLDivElement.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.6356141797197%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA90lEQVQoz42Q626DMAyFef8nBMFATIyp7doKEpI4CZzZhk6t9mOL9MkX4cOxC+ccpmmCMUbx3itE9BNDCC9o/8gXTzCL5xiwbRuKuq4hlGWJqqrQtq0yDAO6rkPTNOj7XpH+m9TDiPfhQ+fG8wW32eJuFkAEU0rI64qVkRi5ll7KeY9HnpkYI4iJKWsvxoSNZx5vYwpJfCBee8ZsrIqmvPL6lsWy1sZaLIvDyg4C0XGi/VsV4r6gDiWRQaL97w+nkue8O1dX7EacBY6ODTi+GXH+LKg3FNX/Pus8xtMFn+cvnK43dhtfHcrKz+p/IQ7FmSBn+rUyv29cXCDzfE2V4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"HTMLDivElement\"\n        title=\"\"\n        src=\"/static/bfadf4ef868bc1446cd94511666171ee/f570d/HTMLDivElement.png\"\n        srcset=\"/static/bfadf4ef868bc1446cd94511666171ee/0783d/HTMLDivElement.png 240w,\n/static/bfadf4ef868bc1446cd94511666171ee/782f4/HTMLDivElement.png 480w,\n/static/bfadf4ef868bc1446cd94511666171ee/f570d/HTMLDivElement.png 960w,\n/static/bfadf4ef868bc1446cd94511666171ee/1f27a/HTMLDivElement.png 1213w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>对于一些 DOM 相关的属性，比如 <code class=\"gatsby-code-text\">onclick</code>、<code class=\"gatsby-code-text\">onchange</code> 等，你都可以如法炮制，找到它们的定义。</p>\n<h3>常见 Types 之 React</h3>\n<p>关于 TypeScript 的问题，有不少其实是在使用第三方库的时候遇到的，React 就是其中比较典型的一个。</p>\n<p>其实方法都一样，只不过相关的类型定义不在 TypeScript 中，而是在 <code class=\"gatsby-code-text\">@types/react</code> 中。</p>\n<p>React 的类型定义的名称其实也很直观，比如我们常见的 <code class=\"gatsby-code-text\">React.Component</code>，在定义 Class 组件时，我们需要对 Props 和 State 预先进行类型定义，为什么呢？答案就在它的类型定义中。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28cf66b5b8ab65a6857ca9971cdf20b2/b4fb4/types-react-Component.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 111.03074141048825%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACf0lEQVQ4y5VU25abMBDjK3YTLoZAgIRwy42wbTbtW///i6aSMcTQ9LT7oGMTE6HRaOzkbS/l9S5pfZV1vJdVlMt6Q+z0foX9e5TJm0rlLXyNd644D7NSHLU/yqa8SnQ4AWcJd61sipPE5UVCnuH3cN+Ktz2In5b/hBPh5Rh/CsCuyUBOIh6SZMT/kGnCIK9F7RoQVqK4z4f99BLJvkJoP2yPvcTw1IdqDSgOULpfHMXDx1yA61K9DSfIaqFKqvLwx6C6aPjlWTwQ+miWr0lPeG7E5YdIuMD4m0MikrLcBE2JDRKQbCs0C6QK56FZFe0YfX0BlEy/Bv/S7lOSy12y/qcUj1+Snr9LCGU+fQWhy9KhPKhuUH6TdQvUnYZrKpoRbvBCevshSffQ3nk8mxpkrwO8bL4OXTYehjSbXUa5EUpV8Ep7mz89fu6tZ2PZ+Jsz+NeAkCqHQ35penEkmIjqOXE+f7YIayuHiEdSzIxfdvTvwTbSB8JKl+1zUtAA+seoEHYn7el5kcOBUKvDnjlzm04ChFxhXQMrZJGh5tkaH1IEq3gxQVNTlFFINSsdYIQc0QhAFjAq7YcOvO4oRbC7r0sefBsV6pG73CS8YAy/PSTq7+JjHL0G5E2vs+alh6fHpuw/FI5NoQVRD6LLp0TIomKwqfbQiSqBClYcEKsCIwohy7LN6FVTU3RsskZPh8rGj/Cj7XMldscpYrZKa5atHOLQTfZAYdYFYgPzjl36vGTGxMQmxkW7Qclc42qJzmDY2ze645uSeWPzos3Od9miCWHRagT0b2+ismuGBu7m0FffsuSA40alzQdmGfNcg7A6iouurqmAtwnLMiUuMZb8G8lae+cNGhExAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react Component\"\n        title=\"\"\n        src=\"/static/28cf66b5b8ab65a6857ca9971cdf20b2/f570d/types-react-Component.png\"\n        srcset=\"/static/28cf66b5b8ab65a6857ca9971cdf20b2/0783d/types-react-Component.png 240w,\n/static/28cf66b5b8ab65a6857ca9971cdf20b2/782f4/types-react-Component.png 480w,\n/static/28cf66b5b8ab65a6857ca9971cdf20b2/f570d/types-react-Component.png 960w,\n/static/28cf66b5b8ab65a6857ca9971cdf20b2/b4fb4/types-react-Component.png 1106w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>再比如，当我们在写一些组件时，我们可能会需要向下传递 <code class=\"gatsby-code-text\">this.props.children</code>，但 <code class=\"gatsby-code-text\">children</code> 并没有被设为默认值，需要我们自己定义到 props 上，那么它的类型应该是什么呢？</p>\n<p>到类型定义中搜一下关键字 children，很快我们就找到了下面的定义：</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cbfa2bc89b2793c7bca1f7914d65be95/a335a/types-react-children.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.6459286367795%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABu0lEQVQoz21S147bQAzUT9wlsnZVrW7VWLKv4ZAg+f9PmgwprU8I8jAgl8syLF7e39At76imG+JqwLPN8EQ8h2ciP+gbvkVnPB3eRyR1Dy9uZpTzK4rpBelwQ0IZNRPSyxXnbkXc/kCs701W3YDksiCqJwTnhmgfMPkFnik6/bR5h0CcmMjIpwOdBFbk/ladce7PIdCE+0NYlWy9XD5gqZt6hGlnmHLQ4FPZs+CIQCRHYw7MjvhKyOD67ReK998I+wXhsMJOdyafYZngxCJBvyKgPHVbF8E/DI1jaIseltWz+yfSboHPBN9ZwBeGEpg1MESQ1l/6fxk28CzbyThwrcZ2BJZtCiudE2HVtqNwsnvoziflsjShbFDb5lJkqxHZip5QT9rrbpt2+wi5DEFYjbt9i5PutpZl8JQhWcmnOnJW2XCn06pvF+x8JPHR7v48l0iYymHH4sQCkTiyjTCXkSzIxxceLllpq1u7Dz8irjb2h7OZUb3+QXn7ibhjtXaEz6q+ntCk25Yl+cJM2E8rsnnVP7HpAh1Dl7C882yWT8QXCRpxoqOcizgaMpDkYguJdLgiHRe9V7H5u99fp2hc9XXPgF4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react children\"\n        title=\"\"\n        src=\"/static/cbfa2bc89b2793c7bca1f7914d65be95/f570d/types-react-children.png\"\n        srcset=\"/static/cbfa2bc89b2793c7bca1f7914d65be95/0783d/types-react-children.png 240w,\n/static/cbfa2bc89b2793c7bca1f7914d65be95/782f4/types-react-children.png 480w,\n/static/cbfa2bc89b2793c7bca1f7914d65be95/f570d/types-react-children.png 960w,\n/static/cbfa2bc89b2793c7bca1f7914d65be95/a335a/types-react-children.png 1093w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>所有 React 中 JSX 所代表的内容，无论是 <code class=\"gatsby-code-text\">render()</code> 的返回，还是 <code class=\"gatsby-code-text\">children</code>，我们都可以定义为一个 <code class=\"gatsby-code-text\">ReactNode</code>。那这个 <code class=\"gatsby-code-text\">ReactNode</code> 长什么样呢？我们通过右键继续寻找：</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d248f83cf376b3dd90a432c0ca06b982/06916/types-react-ReactNode.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.56657483930211%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABWElEQVQoz52S626CQBSEeYwuC+xuxRt3REWNbbVNmv7o+7/OdA6IaalNGn9MdgnLtzNz8MJZgXCWXxVMM+g4vUvyrRfOe6BJVrCitIFZ1iNVP56jedl9PJZAO6ARLarLCzq9Kut1TdBfHlyS3ATKxuZrxM0BUd4gINynC53U3eqnNYJJAi36T2S5zVQtpvszotUeQdZApSsoXqLyDfxsDc2I/qL809mvyBEBjlBbbmEIiehOszdFiGZMNey/OR0AY2gX2RHiCJtvntC8faI4fcAUG+gF41KGfU6qHabtCbbYdv3qwdVNYL1D3L4gokvH1TJ6yIm75oh4d4YpW4SswIp7ug3E2aBRt55MzRKU0dXy+R2GsG4o8qsQ5NZHaK4PfBY3vgxN4nOVMz7r6adPsWtPNopQx0jLwyseGUnxsEp4+PJO+lPSK1cBSKeav5nP7mVoAhJFNPIF4KEjTAIa/KUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react ReactNode\"\n        title=\"\"\n        src=\"/static/d248f83cf376b3dd90a432c0ca06b982/f570d/types-react-ReactNode.png\"\n        srcset=\"/static/d248f83cf376b3dd90a432c0ca06b982/0783d/types-react-ReactNode.png 240w,\n/static/d248f83cf376b3dd90a432c0ca06b982/782f4/types-react-ReactNode.png 480w,\n/static/d248f83cf376b3dd90a432c0ca06b982/f570d/types-react-ReactNode.png 960w,\n/static/d248f83cf376b3dd90a432c0ca06b982/06916/types-react-ReactNode.png 1089w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>看到这里，我们不光找到了我们想要的类型，还顺带明白了为什么 <code class=\"gatsby-code-text\">render()</code> 可以返回 boolean、null、undefined 表示不渲染任何内容。</p>\n<p>那么事件呢？当我们给组件定义时间处理函数的时候，也经常会被要求指定类型。还是老办法，找不到咱就搜，比如 <code class=\"gatsby-code-text\">onClick</code> 不清楚，那我们就以它为关键字去搜：</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1bed6209b8d22e30dc513177859aede/e11df/types-react-onClick.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 90.3%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQ4y31U65qaMBD1IbpbJYCCCpJwR0DxsvZr3/+VpmcSwmK7649hQpI5OWdmkkWU95S1F0qqnkJZ0bu/ox9uSG/eVo/Zv43/xmbjp3lji41q6NBcKarOtM1aCmHrpIRVtM87CtIjrWWtDwvSBuOGApDgfRushaqmuOz1HrGTtPDinPxDSV4Ej/EGQCE27hAUIJj/ed7fp+RHGSzXe83+wqwdCv3vYs+CPy42ujuFCYWFlA7tQOp0o23ZksBhKwQ4MPYrsOexCyBmJBA3NwBmxCw1MLOIM5LnK6nhTru6IwGAFaRqg7wVUuTAeziIY8UYZ80wxMIECLZxd6akHwCInFbIX1GTC+kaUBq/zI7k4BAP8xwntEIArkF/j8VPhjll119UPP5QUPS0RLCT1gYsHdklpQGZMZsAGSCQ1RNgOnxQfv9NYdmRI5EzZiUNKI+ZreAijLm3YGMOx6LMchgfT1ryvkHbFIaRkVtPeWTvyWe5QueQWwHlfy7KjdLLnaL+RJucWTWQ/lmYJbwAmMdxtsIcbxnaHrKAh24gebrqKq8z9KgCE5gDqUY+j0vdASKeSTdV/r9tkv6iWe5bNDdXmS0HqJU8es1UNaZIrwAZLLs9NENfIX9JTT/nYAw03iB3K02Dv5LMDNWAm1K15KclbJQsZ/at5OgfhpFl+DFWuQIwPwhoFWlk2pvDzS1sX77OIYpyvoNZS+8MwqaMZA7mh8INEy33iyp/x/ABZp2WKqb8GblaKj8Q0ewuPzGc5dADww1khjXeOi211gWYHodRrqv7MJ+a2tpfZvgNvZrBr50AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react onClick\"\n        title=\"\"\n        src=\"/static/b1bed6209b8d22e30dc513177859aede/f570d/types-react-onClick.png\"\n        srcset=\"/static/b1bed6209b8d22e30dc513177859aede/0783d/types-react-onClick.png 240w,\n/static/b1bed6209b8d22e30dc513177859aede/782f4/types-react-onClick.png 480w,\n/static/b1bed6209b8d22e30dc513177859aede/f570d/types-react-onClick.png 960w,\n/static/b1bed6209b8d22e30dc513177859aede/e11df/types-react-onClick.png 1000w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>据此我们找到一个叫 <code class=\"gatsby-code-text\">MouseEventHandler</code> 的定义，这名字，够直白吧。</p>\n<p>好了，我们找到想要的了。不过既然来了，不如继续看一下，看看还能发现什么。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bda8aee3b0de956d1c9a557f7f6eb4a3/644a5/types-react-EventHandler.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 88.18897637795276%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACIElEQVQ4y41U2XKjMBDkL2KQBD65HBsw8ZV1Upuq/P8vTbpHQLBNbe1D18jCtLp7RgRZc5X8cBWX7iRcFmLXW61mVaLm8pJs5GWeov4fgqSohZiXB0nKxteiUcR5LS7bA5UiHtXHdY9gQRIQLspWkpzrjjSvlXTekQ/gfj5e3yNw6V7s5lXmr60s67NYkBucZPBSxBig0AAWa5tXYiEgLipJsp1E3M+ptBGXH/CfPQhpCYQLkK1PHxJXJ3G7N7zYSgRyxfYghgex4lmCSkI9SK0jGghwSph6wpg2lQgPAJN2ClihQoHf/Z5B89hAM6DUGvAhO7ysL7I+foirjuKgNt4fPQnJUUNUqg2hLsThFnkxKgPYEQaFq/aPZLdviTFChIN1ktFuBIIZMg6BaOujMJyAXumYUBVqhlB4+lQiB3VUFRUjdQCrwR7/31u13fqJcA6i1fGmdj1h3RHWarEn5BSMSZ4UqmVm2L7L5v1LXGfZlD4rKpoxt623zQjY2an8OkKvcAmSFIRxc/EZIquw8BapLByRGk7CRH4PGZ5l9XZTu5xDn2F9n6EeUA8Z/sMyFOIjsbn8HRRazcwPdK/Oo8UQV34Gpy37sWGG6fVrNDK+EawkIfTGkCzbT6p7GpsVB7u3nE1YZpfze8t2ND6/TQEWsLo+f/pbQpUg1Xs8viEduKednrAd6HcNhLxqi84ucxyGu/SNmG1/Z5Gkj/PY4wee/QturaWThgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react EventHandler\"\n        title=\"\"\n        src=\"/static/bda8aee3b0de956d1c9a557f7f6eb4a3/f570d/types-react-EventHandler.png\"\n        srcset=\"/static/bda8aee3b0de956d1c9a557f7f6eb4a3/0783d/types-react-EventHandler.png 240w,\n/static/bda8aee3b0de956d1c9a557f7f6eb4a3/782f4/types-react-EventHandler.png 480w,\n/static/bda8aee3b0de956d1c9a557f7f6eb4a3/f570d/types-react-EventHandler.png 960w,\n/static/bda8aee3b0de956d1c9a557f7f6eb4a3/644a5/types-react-EventHandler.png 1016w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<p>看到了吗，所有的事件处理函数都有对应的定义，每个都需要一个泛型参数，传递了事件的类型，名称也挺直白的。</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/734f616478ea608009b5f36080ab57d8/13a77/types-react-Event.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 844px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 107.34597156398105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAADHElEQVQ4y3VU6ZKaQBD2HZJUrc6MHMMMl4KCeOu6RyXv/0SdrxtIyW7lR1cLwjff0c3MFi1FxZZiVJhV9EOFlKw62hwf1JwftNpdKMpr1Ba1IbtqyfgV6SSnnzqmX8ZOarbMarLVnpL6QNFqR3wdVwfymwOlzZny5kLp5kRB2cpzUdGQSgqpeZyh8qH3NTNpRQFOD/FgBgAPYMfguLY4wAEk3Z7IbY7yjPFr0m7VF//+UjOVlCSFB+z+Rvb4Su7wSp77+Y3K/V0OygAaQPICzzKYGmt8f6iZHm6y1AwvpygP3xxAytMbFe2FSlQC7xaQp21OyhbwEMDoamQ7lDBkqix9CRamQcG/CKDJ5Z3iw50seoRu4K1p0Lc3muOZl+0RRDa0TGshJYAjMt/0kOzxoutu5JjZ9ZOKywcV6A7/aXitV3vSZUcLTMVCEu+9+wc4/uCbYXsGs6v0GOVvn+SvH9JjBsQ4mc2VTH2meb2XCkCE1U0ZDqc4yGQPHYN1V7B7pwwBFfAyAWMNVhoSdbkD20ZYqryXPGYxSF6LFxYg7F0IHy2D338jcYSEtJPTAx7uyEAys9Tr3sPFekcBH/IMaIZQQsiN4F8IMJaYvv4Rye7woLh7kzAWmMuX5kiGmTEZTnoYmWkoPDYAk9EZxwZgBeaxgGyHjdEZJIINy9R43vhqMjLfGAbwjovHJ0JPsM8J+4eDouYmI8PBvMAShYTDrJ6we/KwHxsZag4F0rlKpJsjGBkbXGt8SBhQYa95ZDSYjiwnksdZCnBy2A6hgFVyficHhg6AHJiMDXw0wvJ7IE8e9oAJvPO8xwDjXc549eBjDul+zykfZbjnVSc+Br76v2T2UDYETCz7B4k5wBiUZ9FyKLwl+OKwXAXgZTqVO5E8hrJEukt8qiQU+Gcxgyw/au99KOv9EEovVz0BThnKplyFjUfnKjkQVMleyqa0wlAV/ZbotJqMzBND/IHiQKJu2GV0DzAPMB7umAGxw2Z7JVX1LE3Ry1ZfAVXSj40MNirFyw6zWCKMHKtXcCi4p5gR760MeE0LFLMcv+IM+he7RnWm3pWg2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react Event\"\n        title=\"\"\n        src=\"/static/734f616478ea608009b5f36080ab57d8/13a77/types-react-Event.png\"\n        srcset=\"/static/734f616478ea608009b5f36080ab57d8/0783d/types-react-Event.png 240w,\n/static/734f616478ea608009b5f36080ab57d8/782f4/types-react-Event.png 480w,\n/static/734f616478ea608009b5f36080ab57d8/13a77/types-react-Event.png 844w\"\n        sizes=\"(max-width: 844px) 100vw, 844px\"\n      />\n  </span>\n  </a></p>\n<p>Ok，事件的类型也被我们挖出来了，以后如果需要单独定义一个事件相关的类型，就可以直接用了。</p>\n<p>那 Hooks 怎么办？比如我在用 <code class=\"gatsby-code-text\">useRef()</code> 的时候它经常会提示我类型不匹配，要我指定类型。</p>\n<p>那么我们就来看看 <code class=\"gatsby-code-text\">useRef()</code> 的定义：</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d5d860f53fb57946ad03cc8ad8da3b4c/ad7af/types-react-useRef.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 72.44294167371092%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVQ4y5VT23KCQAzd35CrijfYCyKC2trWmU47nf7//6Q5ARa0fenDmbBJ9iSbHFRenWlRVDTXR1ralpbmSJltxK7diTLX0sI07OM427XhHI4nW0fRSlPYI1obsWplawlm+kAx2xnbULOPCyX7My11RbnrsDIVJVxoXhworS6UNi+U1le5F20sk1pSp9sXaQ7AkWxLSnK+xBfmfDGF5fOSi+AVC7ZCxj7EkJcWtfhAGjOHenr/Jn28UpBpcQzAE0bYHsZ3Eq/tQ7yzqrq8ybNi7i7eOIF0kO/FJrvSf4+2+052Q87ex9T59kmZqaVy152bwPr5jLG/7AhlmmeZzzQpxSwHcHWQolN8d74J+jzkSIfV5SYddk+2spTANRSxDzIBCeZzN9++cPTgQ55qXz9oU7b9oI1UjXibIBNNQofQqGtFp9mdVhs5Z+VJth5mBalhU/I0VIUEIAcmAOBf6E4aAIqh+4hJA15ECLlsS7/AkZCdaDvkeQYciDEGWZbzmwU5SGacMyBELgiLLj7psJ8hCCCVh8X4wXNsjnO/vLRfjl/KQJjKk60PTLsSjU209js+Wk84/TvCyU//X/wAEZWaBuElfV0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"types react useRef\"\n        title=\"\"\n        src=\"/static/d5d860f53fb57946ad03cc8ad8da3b4c/f570d/types-react-useRef.png\"\n        srcset=\"/static/d5d860f53fb57946ad03cc8ad8da3b4c/0783d/types-react-useRef.png 240w,\n/static/d5d860f53fb57946ad03cc8ad8da3b4c/782f4/types-react-useRef.png 480w,\n/static/d5d860f53fb57946ad03cc8ad8da3b4c/f570d/types-react-useRef.png 960w,\n/static/d5d860f53fb57946ad03cc8ad8da3b4c/ad7af/types-react-useRef.png 1183w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </span>\n  </a></p>\n<h2>标准 lib 也会出错</h2>\n<p>比如 classList</p>\n<h2>FAQ</h2>\n<h3>多重 extends</h3>\n<p>当一个类型 <code class=\"gatsby-code-text\">extends</code> 了多个其它类型，重复属性左边覆盖右边</p>\n<h3>obj[param]无法访问怎么办</h3>\n<p>定义 index</p>\n<h3>OptionBag</h3>\n<p>介绍这种形式</p>","frontmatter":{"title":"TypeScript 次日指南","description":"坑这种东西，是不会写在文档上的","cover":{"publicURL":"/static/typescript-8239307adc5ccdfc32320e1bcadb6300.jpg"},"tags":["typescript"],"series":"","draft":true},"fields":{"id":"typescript-the-second-day","date":"2019-07-27T16:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2019/07/28/typescript-the-second-day"}}