{"data":{"site":{"siteMetadata":{"title":"童话说","keywords":["tonghuashuo","github","front-end","javascript","typescript","react","node","washington","hua","童话","童话说","前端","博客","技术","计算机","互联网"]}},"markdownRemark":{"html":"<h2>为什么要重新来过？</h2>\n<p>我之前写过 <a href=\"/blog/2019/02/15/how-to-think-in-hooks\">一篇博客</a>，介绍了 Class 组件的各个生命周期钩子函数在 Hooks 中对应的方案。那时 Hooks 刚刚发布，开发者最关心的莫过于代码的迁移问题，也就是怎么把现有的 Class 组件改造成 Hooks 的方式。</p>\n<p>尽管这种方式非常的直观有效，但很快我们就发现，事情似乎没那么简单。单纯用这个思维来考虑问题，并不能很好地解释 Hooks 的一些行为，比如 <code class=\"gatsby-code-text\">useEffect</code> 中的变量有时候无法获取最新的值、命令式的回调函数也不总是按照我们的预期工作，<code class=\"gatsby-code-text\">useEffect</code> 的依赖数组好像总是缺点什么。</p>\n<p>在亲自踩了 2 个多月的坑，参与了一些 <a href=\"https://github.com/reactjs/zh-hans.reactjs.org/pull/121\">React 官网的翻译工作</a>，拜读了 <a href=\"https://overreacted.io/making-setinterval-declarative-with-react-hooks/\">几篇</a> <a href=\"https://overreacted.io/a-complete-guide-to-useeffect/\">博客</a> 之后，我豁然醒悟，对「如何 Think in Hooks」有了新的认识。</p>\n<p>因此这篇博客，我们来「重新 Think in Hooks」。</p>\n<h2>当我们讨论 Hooks 时，我们到底在讨论什么？</h2>\n<p>要理解 Hooks，我们得先回到 Hooks 的本质 —— 一种逻辑复用的方式。</p>\n<p>Hooks 并不是新的组件类型，当我们讨论 Hooks 时，我们讨论的其实是函数组件 —— 就是那种没有 state、没有生命周期、只是根据 props 返回相应的 JSX 的函数。Hooks 的出现让函数组件可以拥有和 Class 组件一样可以拥有 state（是可以，不是必须），相应的也就有了生命周期。因此确切的说，我们是在讨论使用了 Hooks 的函数组件。</p>\n<p>但是「使用了 Hooks 的函数组件」这个词太长了，而下文我又将经常提到这个词，所以在后面的文字中，我将简单用 Hooks 来表示。</p>\n<h2>欲练此功，必先……忘记过去之所学</h2>\n<p>当我们在使用 Class 组件时，每当 props 或 state 有更新，只有 <code class=\"gatsby-code-text\">render()</code> 函数会重新执行，其它成员函数（生命周期函数除外）并不会因此而重新执行。</p>\n<h2>小结</h2>\n<p>当初第一次看到官方文档中的「It takes a bit of a mindshift to start “thinking in Hooks”」这句话，我并没有太当回事，觉得无非就是有一样新东西要学而已。</p>","frontmatter":{"title":"重新 Think in Hooks","description":"忘记过去之所学，我们从头来过","cover":{"publicURL":"/static/think-in-hooks-again-f9fcd719dcab55af4a1ad3d3cfbe0585.jpg"},"tags":["react","hooks"],"series":"","draft":true},"fields":{"id":"rethink-in-hooks","date":"2019-05-07T16:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2019/05/08/rethink-in-hooks"}}