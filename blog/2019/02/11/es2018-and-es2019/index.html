<!DOCTYPE html><html lang="zh"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1"/><meta http-equiv="render" content="webkit"/><meta http-equiv="force-rendering" content="webkit"/><meta http-equiv="format-detection" content="telephone=no"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, userscalable=no, shrink-to-fit=no, viewport-fit=cover"/><style data-href="/styles.c96adf9cb351179e850e.css">/*! normalize-scss | MIT/GPLv2 License | bit.ly/normalize-scss */html{line-height:1.15}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}main{display:block}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}input{overflow:visible}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;display:table;max-width:100%;padding:0;color:inherit;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}details{display:block}summary{display:list-item}menu{display:block}canvas{display:inline-block}template{display:none}[hidden]{display:none}*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Hiragino Sans GB,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Open Sans,Droid Sans,Microsoft YaHei,WenQuanYi Micro Hei,Helvetica Neue,Tahoma,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}body,html{margin:0;padding:0}html{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Hiragino Sans GB,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Open Sans,Droid Sans,Microsoft YaHei,WenQuanYi Micro Hei,Helvetica Neue,Tahoma,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{background-color:#000;-webkit-overflow-scrolling:touch}body,h1,h2,h3,h4,h5,p{margin:0}a,h1,h2,h3,h4,h5,p{font-weight:400}ol,ul{margin:0;padding:0}ul{list-style:none}a{text-decoration:none}.scroll-lock{overflow:hidden}.mf-content{width:100%;max-width:960px;margin:0 auto 30px;-webkit-transition:max-width .3s ease-out;transition:max-width .3s ease-out}@media (max-width:1280px){.mf-content{max-width:768px}}@media (max-width:768px){.mf-content{max-width:100%}}main{min-height:calc(100vh - 44px)}#mf-header{position:fixed;top:0;left:0;width:100%;height:44px;background-color:#000;z-index:10;box-shadow:0 0 2px 2px rgba(0,0,0,.5)}#mf-header .mf-header-wrapper{width:100%;max-width:960px;height:100%;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding-left:15px;padding-right:15px;-webkit-transition:max-width .3s ease-out;transition:max-width .3s ease-out}@media (max-width:1280px){#mf-header .mf-header-wrapper{max-width:768px}}#mf-header .mf-header-wrapper .logo{height:44px;display:flex;align-items:center}#mf-header .mf-header-wrapper .logo img{height:32px;margin-right:15px}#mf-header .mf-header-wrapper .logo span{display:block;font-size:20px;height:44px;line-height:44px;color:hsla(0,0%,100%,.84);-webkit-transition:color .3s ease-out,font-size .3s ease-out;transition:color .3s ease-out,font-size .3s ease-out}@media (max-width:480px){#mf-header .mf-header-wrapper .logo span{font-size:16px}}#mf-header .mf-header-wrapper .logo span:hover{color:#fff}#mf-header .mf-header-wrapper .hamberger{width:22px;height:16px;display:flex;flex-direction:column;justify-content:space-between;border-top:2px solid hsla(0,0%,100%,.84);border-bottom:2px solid hsla(0,0%,100%,.84);position:relative;-webkit-transition:border-color .3s ease-out;transition:border-color .3s ease-out;cursor:pointer}#mf-header .mf-header-wrapper .hamberger.open{border-top-color:transparent;border-bottom-color:transparent}#mf-header .mf-header-wrapper .hamberger.open:before{-webkit-transform:translate(-50%,-50%) rotate(-45deg);transform:translate(-50%,-50%) rotate(-45deg)}#mf-header .mf-header-wrapper .hamberger.open:after{-webkit-transform:translate(-50%,-50%) rotate(45deg);transform:translate(-50%,-50%) rotate(45deg)}#mf-header .mf-header-wrapper .hamberger:after,#mf-header .mf-header-wrapper .hamberger:before{content:"";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;width:100%;height:2px;background-color:hsla(0,0%,100%,.84);-webkit-transition:-webkit-transform .3s ease-out;transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out;transition:transform .3s ease-out,-webkit-transform .3s ease-out}#mf-header .mf-header-wrapper .nav-menu{position:fixed;top:44px;left:0;right:0;bottom:0;background-color:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;pointer-events:none;z-index:10;-webkit-transition:opacity .3s ease-out;transition:opacity .3s ease-out}#mf-header .mf-header-wrapper .nav-menu.open{opacity:1;pointer-events:all}#mf-header .mf-header-wrapper .nav-menu .menus{flex-basis:1;display:flex;flex-direction:column;align-items:center}#mf-header .mf-header-wrapper .nav-menu .menus .menu{display:block;width:180px;height:40px;line-height:40px;font-size:16px;color:hsla(0,0%,100%,.54);text-align:center;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out}#mf-header .mf-header-wrapper .nav-menu .menus .menu:hover{color:hsla(0,0%,100%,.54)}#mf-header .mf-header-wrapper .nav-menu .menus .menu:not(:first-child){margin-top:15px}#mf-header .mf-header-wrapper .nav-menu .menus .menu.active{color:hsla(0,0%,100%,.84);border-top:1px solid hsla(0,0%,100%,.84);border-bottom:1px solid hsla(0,0%,100%,.84)}#mf-header .mf-header-wrapper .nav-menu .menus .menu.active:hover{color:hsla(0,0%,100%,.84)}#mf-header-placeholder{height:44px}.project-detail .back-to-parent{padding:50px 15px 20px}.project-detail .back-to-parent a{color:hsla(0,0%,100%,.54)}.project-detail article{padding:10px 15px 20px}.project-detail article h1,.project-detail article h2,.project-detail article h3,.project-detail article h4,.project-detail article h5{color:hsla(0,0%,100%,.84);font-weight:700;line-height:1.5;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}.project-detail article h1{font-size:32px;margin-top:1em;margin-bottom:.5em}@media (max-width:480px){.project-detail article h1{font-size:28px}}.project-detail article h2{font-size:28px;margin-top:1.5em;margin-bottom:.8em}@media (max-width:480px){.project-detail article h2{font-size:24px}}.project-detail article h3{font-size:24px;margin-top:1.5em;margin-bottom:.5em}@media (max-width:480px){.project-detail article h3{font-size:20px}}.project-detail article h4{font-size:20px;margin-top:1.5em;margin-bottom:.5em}@media (max-width:480px){.project-detail article h4{font-size:18px}}.project-detail article h5{font-size:18px;margin-top:1.5em;margin-bottom:.5em}@media (max-width:480px){.project-detail article h5{font-size:16px}}.project-detail article p{color:hsla(0,0%,100%,.54);line-height:1.75;margin-top:0;margin-bottom:1em;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){.project-detail article p{font-size:14px}}.project-detail article a{color:hsla(0,0%,100%,.84);text-decoration:none;font-weight:700;font-size:16px;font-weight:300}.project-detail article a:hover{text-decoration:underline}.project-detail article section{position:relative}.project-detail article>img,.project-detail article section img{max-width:100%;margin-bottom:15px}.project-detail article>img.img-block,.project-detail article section img.img-block{display:block;width:100%}.project-detail article a::-moz-selection,.project-detail article h1::-moz-selection,.project-detail article h2::-moz-selection,.project-detail article h3::-moz-selection,.project-detail article h4::-moz-selection,.project-detail article h5::-moz-selection,.project-detail article img::-moz-selection,.project-detail article li::-moz-selection,.project-detail article p::-moz-selection,.project-detail article span::-moz-selection,.project-detail article td::-moz-selection,.project-detail article th::-moz-selection{background-color:hsla(0,0%,100%,.84);color:#323232}.project-detail article a::selection,.project-detail article h1::selection,.project-detail article h2::selection,.project-detail article h3::selection,.project-detail article h4::selection,.project-detail article h5::selection,.project-detail article img::selection,.project-detail article li::selection,.project-detail article p::selection,.project-detail article span::selection,.project-detail article td::selection,.project-detail article th::selection{background-color:hsla(0,0%,100%,.84);color:#323232}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.gatsby-code-text{font-size:.8em;font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace;color:hsla(0,0%,100%,.84);background-color:#181818;padding:.5em;border-radius:6px}.gatsby-highlight{background:#222;color:#fff;border-radius:10px;overflow:auto;-moz-tab-size:1.5em;-o-tab-size:1.5em;tab-size:1.5em;margin-bottom:15px;-webkit-overflow-scrolling:touch;position:relative}.gatsby-highlight code,.gatsby-highlight span{font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace}.gatsby-highlight code{color:#ccc}.gatsby-highlight>code[class*=gatsby-code-],.gatsby-highlight>pre.prism-code,.gatsby-highlight>pre[class*=gatsby-code-]{height:auto!important;margin:30px 15px 10px 45px;font-size:14px;line-height:20px;white-space:pre;word-break:break-word;overflow-x:auto;overflow-y:hidden;padding-bottom:5px}.gatsby-highlight+.gatsby-highlight{margin-top:20}.gatsby-highlight .token.attr-name{color:#c684c1}.gatsby-highlight .token.block-comment,.gatsby-highlight .token.cdata,.gatsby-highlight .token.comment,.gatsby-highlight .token.doctype,.gatsby-highlight .token.prolog{color:#666}.gatsby-highlight .token.constant,.gatsby-highlight .token.deleted,.gatsby-highlight .token.function-name,.gatsby-highlight .token.number,.gatsby-highlight .token.property,.gatsby-highlight .token.symbol{color:#5a9bcf}.gatsby-highlight .token.boolean{color:#ff8b50}.gatsby-highlight .token.tag{color:#fc929e}.gatsby-highlight .token.string{color:#8dc891}.gatsby-highlight .token.punctuation{color:#88c6be}.gatsby-highlight .token.builtin,.gatsby-highlight .token.char,.gatsby-highlight .token.inserted,.gatsby-highlight .token.selector{color:#d8dee9}.gatsby-highlight .token.function{color:#efbd54}.gatsby-highlight .token.entity,.gatsby-highlight .token.operator,.gatsby-highlight .token.url,.gatsby-highlight .token.variable{color:#9adcff}.gatsby-highlight .token.attr-value{color:#8dc891}.gatsby-highlight .token.keyword{color:#c684c1}.gatsby-highlight .token.atrule,.gatsby-highlight .token.class-name{color:#fac863}.gatsby-highlight .token.important{font-weight:400}.gatsby-highlight .token.bold{font-weight:700}.gatsby-highlight .token.italic{font-style:italic}.gatsby-highlight .token.entity{cursor:help}.gatsby-highlight .namespace{opacity:.7}.gatsby-highlight-code-line{background-color:#353b45;display:block;margin:-.125rem calc(-1rem - 15px);padding:.125rem calc(1rem + 15px)}.line-numbers .line-numbers-rows{top:30px;padding-left:15px}.line-numbers .line-numbers-rows>span{line-height:1.5}.gatsby-highlight[data-language]:before{position:absolute;top:0;right:20px;padding:3px 10px;font-size:12px;text-align:right;color:#444;font-weight:700;letter-spacing:.8px;text-transform:uppercase;border-radius:0 0 5px 5px;background:#ddd}.gatsby-highlight[data-language=html]:before{content:"html";background:#ef5f27;color:#fff;font-weight:400}.gatsby-highlight[data-language=css]:before{content:"css";background:#2aa9df;color:#fff;font-weight:400}.gatsby-highlight[data-language=sass]:before{content:"sass";background:#d0649a;color:#fff;font-weight:400}.gatsby-highlight[data-language=scss]:before{content:"scss";background:#d0649a;color:#fff;font-weight:400}.gatsby-highlight[data-language=less]:before{content:"less";background:#1d365d;color:#fff;font-weight:400}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before{content:"js";background:#f7df1e}.gatsby-highlight[data-language=jsx]:before{content:"jsx";background:#f7df1e}.gatsby-highlight[data-language=ts]:before,.gatsby-highlight[data-language=typescript]:before{content:"ts";background:#284d7f;color:#fff;font-weight:400}.gatsby-highlight[data-language=tsx]:before{content:"tsx";background:#284d7f;color:#fff;font-weight:400}.gatsby-highlight[data-language=bash]:before{content:"bash";background:#f6ffe5;font-weight:400}.gatsby-highlight[data-language=json]:before{content:"json";background:#267cb9;font-weight:400}.gatsby-highlight[data-language=php]:before{content:"php";background:#8892bf;font-weight:400}.blog-post .back-to-parent{padding:50px 15px 20px}.blog-post .back-to-parent a{color:hsla(0,0%,100%,.54)}.blog-post article{padding:10px 15px 150px}.blog-post article a::-moz-selection,.blog-post article code::-moz-selection,.blog-post article h1::-moz-selection,.blog-post article h2::-moz-selection,.blog-post article h3::-moz-selection,.blog-post article h4::-moz-selection,.blog-post article h5::-moz-selection,.blog-post article img::-moz-selection,.blog-post article li::-moz-selection,.blog-post article p::-moz-selection,.blog-post article span::-moz-selection,.blog-post article td::-moz-selection,.blog-post article th::-moz-selection,.blog-post article time::-moz-selection{background-color:hsla(0,0%,100%,.84);color:#000}.blog-post article a::selection,.blog-post article code::selection,.blog-post article h1::selection,.blog-post article h2::selection,.blog-post article h3::selection,.blog-post article h4::selection,.blog-post article h5::selection,.blog-post article img::selection,.blog-post article li::selection,.blog-post article p::selection,.blog-post article span::selection,.blog-post article td::selection,.blog-post article th::selection,.blog-post article time::selection{background-color:hsla(0,0%,100%,.84);color:#000}.blog-post article>h1{color:hsla(0,0%,100%,.84);font-size:36px;font-weight:700;line-height:1.3;margin-bottom:.5em;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out;position:relative}@media (max-width:1280px){.blog-post article>h1{font-size:32px}}@media (max-width:768px){.blog-post article>h1{font-size:28px}}@media (max-width:480px){.blog-post article>h1{font-size:24px}}.blog-post article .metas{display:flex;margin-bottom:20px}@media (max-width:480px){.blog-post article .metas{flex-direction:column}}.blog-post article .metas .publish-date{color:hsla(0,0%,100%,.54);font-size:18px;font-weight:100;line-height:1;position:relative;margin-bottom:0;-webkit-transition:font-size .3s ease-out,margin-bottom .3s ease-out;transition:font-size .3s ease-out,margin-bottom .3s ease-out}@media (max-width:480px){.blog-post article .metas .publish-date{margin-bottom:4px;font-size:14px}}.blog-post article .metas .tags{color:hsla(0,0%,100%,.54);font-size:18px;line-height:1;margin-bottom:0;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out;position:relative;padding-left:1em;margin-left:1em}@media (max-width:480px){.blog-post article .metas .tags{font-size:14px}}.blog-post article .metas .tags:after{content:"";position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:16px;background-color:hsla(0,0%,100%,.54)}@media (max-width:480px){.blog-post article .metas .tags:after{content:none}}.blog-post article .banner{margin-bottom:20px}.blog-post article .banner img{width:100%;display:block;border-radius:6px}.blog-post article .content h1,.blog-post article .content h2,.blog-post article .content h3,.blog-post article .content h4,.blog-post article .content h5{color:hsla(0,0%,100%,.84);font-weight:700;line-height:1.5;margin-top:1.5em;margin-bottom:.5em;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}.blog-post article .content h1{font-size:32px}@media (max-width:480px){.blog-post article .content h1{font-size:28px}}.blog-post article .content h2{font-size:28px}@media (max-width:480px){.blog-post article .content h2{font-size:24px}}.blog-post article .content h3{font-size:24px}@media (max-width:480px){.blog-post article .content h3{font-size:20px}}.blog-post article .content h4{font-size:20px}@media (max-width:480px){.blog-post article .content h4{font-size:18px}}.blog-post article .content h5{font-size:18px}@media (max-width:480px){.blog-post article .content h5{font-size:16px}}.blog-post article .content p{font-size:15px;color:hsla(0,0%,100%,.54);line-height:1.75;margin-top:0;margin-bottom:1em;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){.blog-post article .content p{font-size:14px}}.blog-post article .content a{color:hsla(0,0%,100%,.84);font-size:15px;word-wrap:break-word}.blog-post article .content a:hover{text-decoration:underline}.blog-post article .content ul{list-style:circle}.blog-post article .content ol,.blog-post article .content ul{padding-left:30px;margin:1em 0}.blog-post article .content ol ol,.blog-post article .content ol ul,.blog-post article .content ul ol,.blog-post article .content ul ul{margin:.5em 0}.blog-post article .content ol li,.blog-post article .content ul li{line-height:1.8;margin-bottom:.5em;color:hsla(0,0%,100%,.54);-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){.blog-post article .content ol li,.blog-post article .content ul li{font-size:14px}}.blog-post article .content table{margin-bottom:15px;min-width:100%;border-collapse:collapse}.blog-post article .content table tr:nth-child(odd){background-color:#292929}.blog-post article .content table tr:nth-child(2n){background-color:#1f1f1f}.blog-post article .content table thead tr:nth-child(odd){background-color:#1f1f1f}.blog-post article .content table td,.blog-post article .content table th{font-size:15px;line-height:1.75;margin-top:0;margin-bottom:1em;padding:15px 20px;text-align:left;word-wrap:normal;color:hsla(0,0%,100%,.54);-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){.blog-post article .content table td,.blog-post article .content table th{font-size:14px}}.blog-post article .content table td a,.blog-post article .content table th a{padding:0}.blog-post article .content blockquote{margin:0 0 1em;border-left:3px solid hsla(0,0%,100%,.54);background-color:#181818;padding:15px}.blog-post article .content blockquote p{color:hsla(0,0%,100%,.54);font-size:14px;line-height:1.75;margin-bottom:1em}@media (max-width:480px){.blog-post article .content blockquote p{font-size:12px}}.blog-post article .content blockquote p+p{margin-top:.75em}.blog-post article .content hr{margin:50px auto;width:80%;height:1px;background-color:hsla(0,0%,100%,.54);border:none}.blog-post article.draft .title:before{content:"[ \8349\7A3F   ] ";color:red}#page-not-found{height:calc(100vh - 44px);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:15px}#page-not-found h1{color:hsla(0,0%,100%,.84);font-size:36px}#page-not-found pre{margin-top:40px;margin-bottom:0}#page-not-found pre code{font-size:16px;font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace;color:hsla(0,0%,100%,.54);line-height:1.75}@media (max-width:480px){#page-not-found pre code{font-size:14px}}#page-not-found .btn-back{font-size:16px;font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace;color:hsla(0,0%,100%,.84);margin-top:50px;display:flex;justify-content:center;align-items:center;padding:15px 30px;border:1px solid hsla(0,0%,100%,.84);border-radius:4px;-webkit-transition:background-color .15s ease-out,color .15s ease-out;transition:background-color .15s ease-out,color .15s ease-out}@media (max-width:480px){#page-not-found .btn-back{font-size:14px}}#page-not-found .btn-back:hover{background-color:hsla(0,0%,100%,.84);color:#000}#about article{padding:0 15px}#about article h1{color:hsla(0,0%,100%,.84);font-size:32px;font-weight:700;line-height:1.5;margin-top:1.5em;margin-bottom:.5em;-webkit-transition:margin-top .3s ease-out,font-size .3s ease-out;transition:margin-top .3s ease-out,font-size .3s ease-out}@media (max-width:768px){#about article h1{font-size:28px}}#about article h1:first-of-type{margin-top:50px}@media (max-width:768px){#about article h1:first-of-type{margin-top:20px}}#about article p{color:hsla(0,0%,100%,.54);line-height:1.75;margin-top:0;margin-bottom:.75em;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){#about article p{font-size:14px}}#about article ul{padding-left:20px;margin-bottom:.75em}#about article ul li{list-style:circle;color:hsla(0,0%,100%,.54);line-height:1.8;margin-bottom:.5em}#about article img{max-width:100%;margin-bottom:1em}#about article a{color:hsla(0,0%,100%,.84)}#about article a:hover{text-decoration:underline}.blog-catalog .blog-list{padding-top:50px;-webkit-transition:padding-top .3s ease-out;transition:padding-top .3s ease-out}@media (max-width:768px){.blog-catalog .blog-list{padding-top:0}}.blog-catalog .blog-list .blog{display:flex;flex-direction:row-reverse;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out;padding:15px;margin-bottom:20px}@media (max-width:768px){.blog-catalog .blog-list .blog{align-items:stretch}}@media (max-width:480px){.blog-catalog .blog-list .blog{width:100%;margin-bottom:0}}.blog-catalog .blog-list .blog .banner{overflow:hidden;position:relative;width:240px;height:135px;flex-shrink:0;-webkit-transition:width .3s ease-out,height .3s ease-out;transition:width .3s ease-out,height .3s ease-out}@media (max-width:1280px){.blog-catalog .blog-list .blog .banner{width:240px;height:135px}}@media (max-width:768px){.blog-catalog .blog-list .blog .banner{width:200px;min-height:135px;height:auto}}@media (max-width:480px){.blog-catalog .blog-list .blog .banner{width:120px;min-height:90px}}.blog-catalog .blog-list .blog .banner img{height:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.blog-catalog .blog-list .blog .info{padding-right:10px;flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}.blog-catalog .blog-list .blog .info .title{color:hsla(0,0%,100%,.84);font-size:26px;font-weight:700;line-height:1.375;margin-bottom:12px;word-wrap:break-word;-webkit-transition:font-size .3s ease-out,margin-bottom .3s ease-out;transition:font-size .3s ease-out,margin-bottom .3s ease-out}@media (max-width:1280px){.blog-catalog .blog-list .blog .info .title{font-size:22px;margin-bottom:8px}}@media (max-width:768px){.blog-catalog .blog-list .blog .info .title{font-size:18px}}@media (max-width:480px){.blog-catalog .blog-list .blog .info .title{font-size:14px;margin-bottom:4px}}.blog-catalog .blog-list .blog .info .desc{color:hsla(0,0%,100%,.54);line-height:1.375;word-wrap:break-word;-webkit-transition:color .3s ease-out;transition:color .3s ease-out;margin-bottom:8px;font-size:14px;flex-grow:1;-webkit-transition:font-size .3s ease-out,margin-bottom .3s ease-out;transition:font-size .3s ease-out,margin-bottom .3s ease-out}@media (max-width:480px){.blog-catalog .blog-list .blog .info .desc{font-size:12px;margin-bottom:4px}}.blog-catalog .blog-list .blog .info .blog__footer{display:flex}@media (max-width:768px){.blog-catalog .blog-list .blog .info .blog__footer{flex-direction:column}}.blog-catalog .blog-list .blog .info .blog__footer .date{font-size:14px;color:hsla(0,0%,100%,.54);line-height:1;position:relative;white-space:nowrap;-webkit-transition:font-size .3s ease-out,margin-bottom .3s ease-out;transition:font-size .3s ease-out,margin-bottom .3s ease-out}@media (max-width:768px){.blog-catalog .blog-list .blog .info .blog__footer .date{margin-bottom:2px;font-size:12px}}.blog-catalog .blog-list .blog .info .blog__footer .tags{padding-left:10px;margin-left:10px;display:flex;color:hsla(0,0%,100%,.54);line-height:1;font-size:14px;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out;position:relative}@media (max-width:768px){.blog-catalog .blog-list .blog .info .blog__footer .tags{font-size:12px}}.blog-catalog .blog-list .blog .info .blog__footer .tags:before{content:"";position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:12px;background-color:hsla(0,0%,100%,.54)}@media (max-width:768px){.blog-catalog .blog-list .blog .info .blog__footer .tags:before{content:none}}.blog-catalog .blog-list .blog.draft .title:before{content:"[ \8349\7A3F   ] ";color:red}.blog-catalog .bottom-line{width:100%;height:30px;position:relative}.blog-catalog .bottom-line:after,.blog-catalog .bottom-line:before{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.blog-catalog .bottom-line:before{content:"";height:1px;width:calc(100% - 30px);background-color:hsla(0,0%,100%,.54)}.blog-catalog .bottom-line:after{content:"The End";display:inline-block;padding:0 .5em;color:hsla(0,0%,100%,.54);background-color:#000}#friends h1.title{font-weight:100;font-size:32px;color:hsla(0,0%,100%,.84);padding:0 15px;margin-top:50px;margin-bottom:20px;-webkit-transition:margin-top .3s ease-out,font-size .3s ease-out;transition:margin-top .3s ease-out,font-size .3s ease-out}@media (max-width:768px){#friends h1.title{margin-top:20px;font-size:28px}}#friends .friends:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}#friends .friend{display:block;float:left;width:50%;padding:10px 15px 30px;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out}@media (max-width:480px){#friends .friend{width:100%}}#friends .friend .cover{width:100%}#friends .friend .cover img{display:block;width:100%}#friends .friend .intro{padding:10px 0}#friends .friend .intro h2{font-size:26px;color:hsla(0,0%,100%,.84);line-height:1.5;-webkit-transition:color .3s ease-out;transition:color .3s ease-out;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){#friends .friend .intro h2{font-size:24px}}#friends .friend .intro ul li{color:hsla(0,0%,100%,.54);-webkit-transition:color .3s ease-out;transition:color .3s ease-out;font-size:14px;line-height:1.5;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){#friends .friend .intro ul li{font-size:12px}}.channel-header{padding:10px 15px}.channel-header:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}.channel-header:first-of-type{margin-top:50px}@media (max-width:480px){.channel-header:first-of-type{margin-top:20px}}.channel-header .title{float:left;color:hsla(0,0%,100%,.84);font-size:28px;line-height:32px}.channel-header .more{float:right;color:hsla(0,0%,100%,.54);font-size:16px;line-height:32px}.channel-body{margin-bottom:40px}.channel-body:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}@media (max-width:480px){.channel-body{margin-bottom:20px}}.blogs:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}.blogs .blog{display:block;width:100%;padding:15px;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out}@media (max-width:480px){.blogs .blog{width:100%}}.blogs .blog .banner{position:relative}.blogs .blog .banner img{width:100%}.blogs .blog .info{padding:10px 0}.blogs .blog .info .title{color:hsla(0,0%,100%,.84);font-size:22px;font-weight:700;line-height:1.375;margin-bottom:12px;word-wrap:break-word;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:480px){.blogs .blog .info .title{font-size:20px}}.blogs .blog .info .desc{font-size:14px;line-height:1.3;word-wrap:break-word;margin-bottom:10px;color:hsla(0,0%,100%,.54)}.blogs .blog .info .blog__footer{display:flex}@media (max-width:768px){.blogs .blog .info .blog__footer{flex-direction:column}}.blogs .blog .info .blog__footer .date{font-size:14px;color:hsla(0,0%,100%,.54);line-height:1;position:relative;white-space:nowrap;-webkit-transition:margin-bottom .3s ease-out;transition:margin-bottom .3s ease-out}@media (max-width:768px){.blogs .blog .info .blog__footer .date{margin-bottom:6px}}.blogs .blog .info .blog__footer .tags{display:flex;color:hsla(0,0%,100%,.54);line-height:1;font-size:14px;padding-left:10px;margin-left:10px;-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out}@media (max-width:768px){.blogs .blog .info .blog__footer .tags{font-size:12px}}.blogs .blog .info .blog__footer .tags:after{content:"";position:absolute;top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:12px;background-color:hsla(0,0%,100%,.54)}@media (max-width:768px){.blogs .blog .info .blog__footer .tags:after{content:none}}.projects .project{display:block;float:left;width:50%;padding:15px;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out}@media (max-width:480px){.projects .project{width:100%}}.projects .project .cover{width:100%}.projects .project .cover img{display:block;width:100%}.projects .project .intro{padding:10px 0}.projects .project .intro h2{font-size:26px;line-height:1.5;color:hsla(0,0%,100%,.84);-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){.projects .project .intro h2{font-size:20px}}.projects .project .intro p{color:hsla(0,0%,100%,.54);-webkit-transition:font-size .3s ease-out;transition:font-size .3s ease-out;font-size:14px;line-height:1.5;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){.projects .project .intro p{font-size:12px}}.lab-catalog h1{color:hsla(0,0%,100%,.84);margin-bottom:20px;font-size:32px;font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace;padding:0 15px;-webkit-transition:margin-top .3s ease-out,font-size .3s ease-out;transition:margin-top .3s ease-out,font-size .3s ease-out}@media (max-width:768px){.lab-catalog h1{font-size:28px}}.lab-catalog h1:first-of-type{margin-top:50px}@media (max-width:768px){.lab-catalog h1:first-of-type{margin-top:20px}}.lab-catalog .category{margin-bottom:20px;width:100%;padding:0 15px}.lab-catalog .category:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}.lab-catalog .category .item{display:block;float:left;width:calc((100% - 20px)/3);padding:50px 10px;margin-right:10px;margin-bottom:10px;border:1px solid hsla(0,0%,100%,.54);color:hsla(0,0%,100%,.54);text-align:center;font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace;-webkit-transition:color .3s ease-out,border-color .3s ease-out;transition:color .3s ease-out,border-color .3s ease-out;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){.lab-catalog .category .item{width:calc((100% - 10px)/2)}}.lab-catalog .category .item:hover{color:hsla(0,0%,100%,.84);border-color:hsla(0,0%,100%,.84)}.lab-catalog .category .item:nth-child(3n+3){margin-right:0}@media (max-width:480px){.lab-catalog .category .item:nth-child(3n+3){margin-right:10px}}@media (max-width:480px){.lab-catalog .category .item:nth-child(2n){margin-right:0}}.lab-item article{padding:0 15px}.lab-item a,.lab-item h1,.lab-item h2,.lab-item label,.lab-item li,.lab-item p,.lab-item td,.lab-item th{color:hsla(0,0%,100%,.54);font-family:Fira Code,Source Code Pro,Menlo,Monaco,Consolas,Liberation Mono,Simsun,Courier New,monospace}.lab-item table{width:100%}.lab-item td{border:1px solid hsla(0,0%,100%,.3);padding:15px;white-space:nowrap}.lab-item tr.title td{color:hsla(0,0%,100%,.84);padding:25px 15px;font-weight:700}.lab-item h1{font-size:32px;margin-bottom:.5em}.lab-item h1,.lab-item h2{color:hsla(0,0%,100%,.84);line-height:1.5}.lab-item h2{font-size:28px;margin-top:1em}.lab-item p{color:hsla(0,0%,100%,.54)}.lab-item p,.lab-item ul li{line-height:1.5}.lab-item a{font-size:16px;text-decoration:none}.lab-item a:hover{text-decoration:underline}.lab-item a.back{display:block;font-size:20px;color:hsla(0,0%,100%,.54);padding:50px 0 20px}.lab-item canvas{display:block}.lab-item #error{color:red}#lab-html5-input label{display:block;margin-bottom:.5em;font-size:16px}#lab-html5-input input{width:100%;height:50px;line-height:50px;border:1px solid #999;background-color:transparent;margin-bottom:15px;font-size:16px}#lab-html5-input input[type=\"date\"],#lab-html5-input input[type=\"datetime\"],#lab-html5-input input[type=\"email\"],#lab-html5-input input[type=\"number\"],#lab-html5-input input[type=\"password\"],#lab-html5-input input[type=\"search\"],#lab-html5-input input[type=\"tel\"],#lab-html5-input input[type=\"text\"],#lab-html5-input input[type=\"url\"]{padding-left:1em}#lab-html5-online .online{color:green}#lab-html5-online .offline{color:red}.project-catalog h1.title{font-weight:100;font-size:32px;color:hsla(0,0%,100%,.84);padding:0 15px;margin-top:50px;margin-bottom:20px;-webkit-transition:margin-top .3s ease-out,font-size .3s ease-out;transition:margin-top .3s ease-out,font-size .3s ease-out}@media (max-width:768px){.project-catalog h1.title{margin-top:20px;font-size:28px}}.project-catalog .project-list{margin-bottom:40px}.project-catalog .project-list:after{clear:both;content:".";display:block;width:0;height:0;visibility:hidden}.project-catalog .project-list .project{display:block;float:left;width:50%;padding:15px 15px 30px;-webkit-transition:background-color .3s ease-out;transition:background-color .3s ease-out}@media (max-width:480px){.project-catalog .project-list .project{width:100%}}.project-catalog .project-list .project:nth-child(2n){margin-right:0}.project-catalog .project-list .project .cover{width:100%}.project-catalog .project-list .project .cover img{display:block;width:100%}.project-catalog .project-list .project .intro{padding:20px 0}.project-catalog .project-list .project .intro h2{font-size:26px;color:hsla(0,0%,100%,.84);-webkit-transition:color .3s ease-out;transition:color .3s ease-out;margin-bottom:.5em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){.project-catalog .project-list .project .intro h2{font-size:24px}}.project-catalog .project-list .project .intro p{color:hsla(0,0%,100%,.54);-webkit-transition:color .3s ease-out;transition:color .3s ease-out;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width:480px){.project-catalog .project-list .project .intro p{font-size:12px}}</style><meta name="generator" content="Gatsby 2.3.34"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#000"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=235cfbaa8f456dbe9fab4607e692557c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=235cfbaa8f456dbe9fab4607e692557c"/><title data-react-helmet="true">你可能已经知道的 ES 2018 和 2019 | 博客 | 童话说</title><meta data-react-helmet="true" name="description" content="Washington Hua 的个人博客，专注大前端技术"/><meta data-react-helmet="true" property="og:title" content="你可能已经知道的 ES 2018 和 2019 | 博客"/><meta data-react-helmet="true" property="og:description" content="Washington Hua 的个人博客，专注大前端技术"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Washington Hua"/><meta data-react-helmet="true" name="twitter:title" content="你可能已经知道的 ES 2018 和 2019 | 博客"/><meta data-react-helmet="true" name="twitter:description" content="Washington Hua 的个人博客，专注大前端技术"/><meta data-react-helmet="true" name="keywords" content="tonghuashuo, github, front-end, javascript, typescript, react, node, washington, hua, 童话, 童话说, 前端, 博客, 技术, 计算机, 互联网"/><link as="script" rel="preload" href="/webpack-runtime-96fbf1fe878b30336166.js"/><link as="script" rel="preload" href="/app-ad12deca84cadbbc3958.js"/><link as="script" rel="preload" href="/styles-a0749458ddfbc5df419f.js"/><link as="script" rel="preload" href="/1-ae7d0eb19066da87ad93.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-a358ccd3d4aba212057b.js"/><link as="fetch" rel="preload" href="/static/d/356/path---blog-2019-02-11-es-2018-and-es-2019-89-f-211-YnQyLjbdgc7nafR4DJdOOwfzI.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header id="mf-header"><div class="mf-header-wrapper"><a class="logo" href="/"><img src="/static/logo-8503f6989dba3ce27939964a48c8b787.png" alt=""/><span>童话说</span></a><div class="hamberger"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div><nav class="nav-menu"><div class="menus"><a class="menu active" href="/blog">博客</a><a class="menu" href="/project">代表作</a><a class="menu" href="/lab">实验室</a><a class="menu" href="/friend">朋友</a><a class="menu" href="/about">我</a></div></nav></div></header><section id="mf-header-placeholder"></section><main><div class="mf-content blog-post"><p class="back-to-parent"><a href="/blog">« 回到博客列表</a></p><article class="" id="blog__es2018-and-es2019"><h1 class="title">你可能已经知道的 ES 2018 和 2019</h1><div class="metas"><p class="publish-date"><time dateTime="2019-02-10T16:00:00.000Z">Feb 11, 2019</time></p></div><div class="banner"><img src="/static/es2019-5646b4878e533cd7c725ce4c17984071.jpg" alt=""/></div><div class="content"><h2>标准这事儿吧……</h2>
<p>ES 2019（ES 10）标准于年前正式发布，借此机会，我们来看看都有哪些特性有幸转正吧。顺带把 ES 2018 的内容也补一下。</p>
<p>ECMAScript 标准的制定过程，自 2015 年大改，至今已经是第 5 个年头了，想必大家都心里有数了。与 Java 等语言不同，JS 并非先制定标准再开始使用，恰恰相反，是大家先用着，觉得合适的，才收录进标准。标准的存在更像是一个“年度优秀特性合集”。对绝大部分开发者来说，一项特性进没进标准不重要，Babel 支不支持才重要。标准你随便写，不用 Babel 算我输。</p>
<p>那么接下来，我们就来看看 2018 和 2019 两个年度的大合集都有些啥吧。</p>
<h2>ES2018（ES9）</h2>
<h3>1）异步迭代器（Asynchronous Iteration）</h3>
<p>总有那么些时候，我们会想要同步执行一些异步的操作，比如下面这样的：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">[</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>利用 <code class="gatsby-code-text">async / await</code> 语法，我们可以很轻松的做到这点。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">process</span> <span class="token punctuation">(</span><span class="token parameter">actions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> action <span class="token keyword">of</span> actions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">asyncFunc</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>上面的写法，会按顺序执行 <code class="gatsby-code-text">asyncFunc</code>，上一个结束之后才会开始下一个，每次得到的 <code class="gatsby-code-text">action</code> 都是一个异步操作本身（比如这里是一个 Promise 对象）。</p>
<p>ES 2018 为我们提供了一种新的方式，在前面代码的基础之上，让每次得到的 <code class="gatsby-code-text">action</code> 直接是异步操作完成之后的结果（比如这里是 Promise 被 resolve 之后的结果）。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">process</span> <span class="token punctuation">(</span><span class="token parameter">actions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> action <span class="token keyword">of</span> actions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">asyncFunc</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>2）Rest/Spread Properties 开始适用于对象</h3>
<p>这是一个从 ES 2015 开始就被广泛使用的特性，只不过 ES 2015 的标准只支持用于数组，从 ES 2018 开始也支持对象了。</p>
<p>事实上 Map、Set、String 同样支持 <code class="gatsby-code-text">...</code>，但具体是哪个版本引入的我还真没数。（反正我已经用了很久了，不管了）</p>
<h3>3）Promise.finally</h3>
<p>正如它的名字，finally。这也是个用了好久终于进标准的特性。</p>
<p>在处理 Promise 的返回时，我们经常会遇到这样的情况：无论结果状态是 resolved 还是 rejected，都执行一样的逻辑。</p>
<p>早先遇到这种情况，我们不得不在 <code class="gatsby-code-text">then()</code> 和 <code class="gatsby-code-text">catch()</code> 里都写一遍，现在可以一次性写在 <code class="gatsby-code-text">finally()</code> 里。一个 <code class="gatsby-code-text">finally()</code> 就等价于一组回调函数相同的 <code class="gatsby-code-text">then()</code> 和 <code class="gatsby-code-text">catch()</code>。</p>
<p>虽然名字叫“最终”，但并不代表这是 Promise 执行的终点。<code class="gatsby-code-text">finally()</code> 后面还可以继续跟 <code class="gatsby-code-text">then()</code> 和 <code class="gatsby-code-text">catch()</code>，无限跟。</p>
<h3>4）移除对“在‘带标签的模版字面量’中使用非法转义序列”的限制</h3>
<p>从这里开始的内容比较高阶，一般用不到，赶时间的话你可以跳过，直接去看 ES 2019。</p>
<p>这一节的标题有点绕，我们拆开来讲。首先是“带标签的模版字面量”。</p>
<p>ES 2015 引入了“模板字面量”的特性，相信大家都很熟悉了，长这样：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'John'</span>
<span class="token keyword">const</span> greetings <span class="token operator">=</span> <span class="token template-string"><span class="token string">`Hi, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token comment">// 'Hi, John'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>这个特性有一个生僻用法，它允许我们自定义一个字符串模板函数，比如下面这样：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">function</span> <span class="token function">myTag</span><span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// strings: ['that ', ' is a ', '']</span>

  <span class="token keyword">const</span> name <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> age <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> title <span class="token operator">=</span> age <span class="token operator">></span> <span class="token number">99</span> <span class="token operator">?</span> <span class="token string">'centenarian'</span> <span class="token punctuation">:</span> <span class="token string">'youngster'</span>

  <span class="token keyword">return</span> strings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> name <span class="token operator">+</span> strings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> title
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token string">'Mike'</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">28</span>
<span class="token keyword">const</span> output <span class="token operator">=</span> myTag<span class="token template-string"><span class="token string">`that </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> person <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is a </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> age <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
<span class="token comment">// that Mike is a youngster</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>这就是“带标签的模版字面量”。尽管我严重怀疑这个用法的实用性（或许是觉得这样更加语义化？普通函数语义也不差啊？），但 ES 2018 还是选择了对这个特性进行完善。</p>
<p>ES 2016 为这个特性加入了对转义序列的支持，比如八进制（\ 开头）、十六进制（\x 开头）、Unicode 字符（\u 开头），但前提必须是一个有效的转义序列。如果是无效的序列，会报错。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript">latex<span class="token template-string"><span class="token string">`\u00A9`</span></span>   <span class="token comment">// 合法，表示“版权符号”</span>
latex<span class="token template-string"><span class="token string">`\unicode`</span></span> <span class="token comment">// 不合法，报错</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>ES 2018 去掉了这个限制，主要是考虑到对一些领域特定语言的支持，比如 <a target='_blank' href='https://www.latex-project.org/'>LaTeX</a>。（学术界一种常用的标记型语言，类似 HTML，其语法会用到大量形如转义序列的指令，如<code class="gatsby-code-text">\section</code>、<code class="gatsby-code-text">\frac</code>、<code class="gatsby-code-text">\sum</code> 等）</p>
<p>但去掉限制只是说不报错了，模板中的无效转义序列会被替换为 undefined。比如下面这样：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">function</span> <span class="token function">myTag</span> <span class="token punctuation">(</span><span class="token parameter">template<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> template<span class="token punctuation">,</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">'foo'</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token string">'bar'</span>
myTag<span class="token template-string"><span class="token string">`aaa</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\unicode</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bar<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">bbb`</span></span>
<span class="token comment">/* {
  template: ['aaa', undefined, 'bbb', raw: ['aaa', '\unicode', 'bbb]],
  params: ['foo', 'bar']
} */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>上面的代码里，<code class="gatsby-code-text">template</code> 是模板部分被 <code class="gatsby-code-text">${foo}</code> 等变量分割形成的数组；<code class="gatsby-code-text">params</code> 就是 <code class="gatsby-code-text">${foo}</code> 等变量组成的数组。可以看到，<code class="gatsby-code-text">\unicode</code> 由于是无效的转义序列，被替换为 <code class="gatsby-code-text">undefined</code>，但在 <code class="gatsby-code-text">template.raw</code> 里得以保留。</p>
<p><code class="gatsby-code-text">template.raw</code> 是“带标签的模版字面量”中 <code class="gatsby-code-text">template</code> 参数特有的一个属性，保存了未被替换的原始字符串。</p>
<p>这样一来，既避免了报错，又保留了开发者自行处理这些转义序列的能力。</p>
<h3>5）关于正则表达式的一些改进</h3>
<h4>5.1）<code class="gatsby-code-text">s</code> 标志（dotAll 模式）</h4>
<p>在正则表达式中，点号 <code class="gatsby-code-text">.</code> 表示匹配任一单个字符，但这不包含换行符（如：<code class="gatsby-code-text">\n</code>、<code class="gatsby-code-text">\r</code>、<code class="gatsby-code-text">\f</code> 等）。</p>
<p>现在可以通过在尾部增加 <code class="gatsby-code-text">s</code> 标志的方式，让它匹配了。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token regex">/hello.world/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'hello\nworld'</span><span class="token punctuation">)</span>  <span class="token comment">// false</span>
<span class="token operator">/</span>hello<span class="token punctuation">.</span>world<span class="token operator">/</span>s<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'hello\nworld'</span><span class="token punctuation">)</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<h4>5.2）扩展 Unicode 匹配范围</h4>
<p>一直以来，要编写正则表达式来匹配各种 Unicode 字符并不容易，像 <code class="gatsby-code-text">\w</code>、<code class="gatsby-code-text">\W</code>、<code class="gatsby-code-text">\d</code> 等都只能匹配英文字符和数字，对于除此之外的字符就很难匹配了，例如非英语的文字。</p>
<p>幸运的是，Unicode 为每个符号添加了元数据属性，并使用它来对各种符号进行分组和描述。例如，Unicode 数据库给所有印地语字符（हिन्दी）设置了 Script 属性，取值为 Devanagari（梵文），还设置了一个 Script_Extensions 属性，同样取值为 Devanagari。我们可以通过搜索 Script=Devanagari 来得到所有印地文字符。</p>
<p>ES 2018 允许正则表达式通过 <code class="gatsby-code-text">\p{...}</code> 来扩展 Unicode 符号的匹配范围。例如：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token comment">// 扩展匹配范围，允许匹配希腊字符</span>
<span class="token keyword">const</span> reGreekSymbol <span class="token operator">=</span> <span class="token regex">/\p{Script=Greek}/u</span>
reGreekSymbol<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'π'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token comment">// 扩展匹配范围，允许匹配 Emoji</span>
<span class="token keyword">const</span> reEmoji <span class="token operator">=</span> <span class="token regex">/\p{Emoji}\p{Emoji_Modifier}/u</span>
reEmoji<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'✌🏽'</span><span class="token punctuation">)</span> <span class="token comment">//true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>我们还可以通过 <code class="gatsby-code-text">\P{...}</code>（注意，大写 P）来去反，缩小匹配范围。</p>
<h4>5.3）正则表达式命名捕获组</h4>
<p>正则表达式支持通过括号在一个表达式中指定多个捕获组，就像下面这样：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span>
  reDate <span class="token operator">=</span> <span class="token regex">/([0-9]{4})-([0-9]{2})-([0-9]{2})/</span><span class="token punctuation">,</span>
  match  <span class="token operator">=</span> reDate<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'2019-02-11'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  year   <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 2019</span>
  month  <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 02</span>
  day    <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 11</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>这样的代码虽然可以跑通，但阅读起来比较难懂，而且修改正则有可能会影响到匹配内容的索引。</p>
<p>ES 2018 允许在 <code class="gatsby-code-text">(</code> 后立即使用符号 <code class="gatsby-code-text">?&lt;name&gt;</code> 对捕获组进行命名，匹配失败的会返回 <code class="gatsby-code-text">undefined</code>，就像下面这样：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span>
  reDate <span class="token operator">=</span> <span class="token regex">/(?&lt;year>[0-9]{4})-(?&lt;month>[0-9]{2})-(?&lt;day>[0-9]{2})/</span><span class="token punctuation">,</span>
  match  <span class="token operator">=</span> reDate<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'2019-02-11'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  year   <span class="token operator">=</span> match<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">,</span>  <span class="token comment">// 2019</span>
  month  <span class="token operator">=</span> match<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">,</span> <span class="token comment">// 02</span>
  day    <span class="token operator">=</span> match<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>day   <span class="token comment">// 11</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>命名捕获组也可以用在 <code class="gatsby-code-text">replace()</code> 中，用 <code class="gatsby-code-text">$&lt;name&gt;</code> 进行引用（注意，虽然这里的语法和模板字面量很像，但并不是）。例如改变日期格式的顺序：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span>
  reDate <span class="token operator">=</span> <span class="token regex">/(?&lt;year>[0-9]{4})-(?&lt;month>[0-9]{2})-(?&lt;day>[0-9]{2})/</span><span class="token punctuation">,</span>
  d      <span class="token operator">=</span> <span class="token string">'2019-02-11'</span><span class="token punctuation">,</span>
  usDate <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reDate<span class="token punctuation">,</span> <span class="token string">'$&lt;month>-$&lt;day>-$&lt;year>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 02-11-2019</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<h4>5.4）正则表达式的反向断言（lookbehind）</h4>
<p>正则表达式支持正向断言（lookahead），例如：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token comment">// 正向肯定查找</span>
<span class="token operator">/</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>y<span class="token punctuation">)</span><span class="token operator">/</span> <span class="token comment">// 匹配 x，但仅当 x 后面紧跟着 y 时</span>
<span class="token operator">/</span><span class="token function">Jack</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>Sprat<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'JackSprat'</span><span class="token punctuation">)</span> <span class="token comment">// 'Jack'</span>
<span class="token operator">/</span><span class="token function">Jack</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>Sprat<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'JackFrost'</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
<span class="token operator">/</span><span class="token function">Jack</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span>Sprat<span class="token operator">|</span>Frost<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'JackFrost'</span><span class="token punctuation">)</span> <span class="token comment">// 'Jack'</span>

<span class="token comment">// 正向否定查找</span>
<span class="token operator">/</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span>y<span class="token punctuation">)</span><span class="token operator">/</span> <span class="token comment">// 匹配 x，但仅当 x 后面不紧跟着 y 时</span>
<span class="token operator">/</span><span class="token function">Jack</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span>Sprat<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'JackSprat'</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
<span class="token operator">/</span><span class="token function">Jack</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span>Sprat<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'Jack Sprat'</span><span class="token punctuation">)</span> <span class="token comment">// 'Jack'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>ES 2018 引入了工作方式相同，但是方向相反的反向断言（lookbehind），语法上的差别就在于 <code class="gatsby-code-text">?</code> 变成了 <code class="gatsby-code-text">?&lt;</code>，例如：</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token comment">// 反向肯定断言</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>x<span class="token punctuation">)</span>y<span class="token operator">/</span> <span class="token comment">// 匹配 y，但仅当它紧跟在 x 后面时</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;=</span>\<span class="token constant">D</span><span class="token punctuation">)</span>\d<span class="token operator">+</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'$123.89'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 123.89</span>

<span class="token comment">// 反向否定断言</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">!</span>x<span class="token punctuation">)</span>y<span class="token operator">/</span> <span class="token comment">// 匹配 y，但仅当它紧跟在 x 后面时</span>
<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">!</span>\<span class="token constant">D</span><span class="token punctuation">)</span>\d<span class="token operator">+</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'$123.89'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// null</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>ES 2019（ES 10）</h2>
<h3>1）JSON 成为 ECMAScript 的完全子集</h3>
<p>从学习 JSON 的第一课起，我们就被告知 JSON 应该是专为 JavaScript 而存在的，因此 JSON 是 JavaScript 的子集这一点应该毫无争议啊，这算什么新特性！？</p>
<p>然而细心的开发者却发现，有两个符号是例外：行分隔符（U + 2028）和段分隔符（U + 2029）。在 <code class="gatsby-code-text">JSON.parse()</code> 中使用这两个会报语法错误。</p>
<p>ES 2019 把这两个也收入囊中，从今往后，JSON 真正成为 ECMAScript 的完全子集，一个都不少。</p>
<h3>2）更友好的 <code class="gatsby-code-text">JSON.stringify()</code></h3>
<p>过去，对于一些超出 Unicode 范围的转义序列，<code class="gatsby-code-text">JSON.stringify()</code> 会输出未知字符。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'\uDF06\uD834'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '"��"'</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'\uDEAD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '"�"'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>现在，<code class="gatsby-code-text">JSON.stringify()</code> 会为其重新转义，显示为有效的 Unicode 序列。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'\uDF06\uD834'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '"\\udf06\\ud834"'</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'\uDEAD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '"\\udead"'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>这和 ES 2018 中对“带标签的模板字面量”的修正，似乎有些许联系。结合历代 ECMAScript 标准，ECMAScript 在处理 Unicode 的问题上着实吓了不少功夫。</p>
<h3>3）<code class="gatsby-code-text">Function.prototpye.toString()</code> 显示更加完善</h3>
<p>对一个函数使用 <code class="gatsby-code-text">toString()</code> 会返回函数定义的内容。</p>
<p>过去，返回的内容中 <code class="gatsby-code-text">function</code> 关键字和函数名之间的注释，以及函数名和参数列表左括号之间的空格，是不会被打出来的。ES 2019 现在回精确返回这些内容，函数怎么定义的，这就就怎么显示。</p>
<h3>4）<code class="gatsby-code-text">Array.prorptype.flat()</code> 和 <code class="gatsby-code-text">Array.prorptype.flatMap()</code></h3>
<p>ES 2019 为数组新增两个函数。</p>
<p><code class="gatsby-code-text">flat()</code> 用于对数组进行降维，它可以接收一个参数，用于指定降多少维，默认为 1。降维最多降到一维。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, [3]]</span>
array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, [3]]，默认降 1 维</span>
array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]</span>
array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3]，最多降到一维</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code class="gatsby-code-text">flatMap()</code> 允许在对数组进行降维之前，先进行一轮映射，用法和 <code class="gatsby-code-text">map()</code> 一样。然后再将映射的结果降低一个维度。可以说 <code class="gatsby-code-text">arr.flatMap(fn)</code> 等效于 <code class="gatsby-code-text">arr.map(fn).flat(1)</code>。（但是根据 <a target='_blank' href='https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap'>MDN</a>，<code class="gatsby-code-text">flatMap()</code> 在效率上略胜一筹）</p>
<p><code class="gatsby-code-text">flatMap()</code> 也可以等效为 <code class="gatsby-code-text">reduce()</code> 和 <code class="gatsby-code-text">concat()</code> 的组合，下面这个案例来自 <a target='_blank' href='https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap#%E7%AD%89%E4%BB%B7%E6%93%8D%E4%BD%9C'>MDN</a>，但是……这不是一个 <code class="gatsby-code-text">map</code> 就能搞定的事么？</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
arr1<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token operator">=></span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code class="gatsby-code-text">flat()</code> 和 <code class="gatsby-code-text">flatMap()</code> 都是返回新的数组，原数组不变。</p>
<h3>5）<code class="gatsby-code-text">String.prototype.ES 2019 为数组新增两个函数。</code> 和 <code class="gatsby-code-text">String.prototype.trimEnd()</code></h3>
<p>ES 2019 为字符串也新增了两个函数：<code class="gatsby-code-text">trimStart()</code> 和 <code class="gatsby-code-text">trimEnd()</code>。用过 <code class="gatsby-code-text">trim()</code> 的朋友都知道了，这两个函数各自负责只去掉单边的多余空格。<code class="gatsby-code-text">trim()</code> 是两边都去。</p>
<h3>6）<code class="gatsby-code-text">Object.fromEntries()</code></h3>
<p>从名字就能看出来，这是 <code class="gatsby-code-text">Object.entries()</code> 的逆过程。</p>
<h3>7）<code class="gatsby-code-text">Symbol.prototype.description</code></h3>
<p>Symbol 是 ES 2015 引入的新的原始类型，通常在创建 Symbol 时我们会附加一段描述。过去，只有把这个 Symbol 转成 String 才能看到这段描述，而且外层还套了个 'Symbol()' 字样。ES 2019 为 Symbol 新增了 <code class="gatsby-code-text">description</code> 属性，专门用于查看这段描述。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'The description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">String</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token comment">// 'Symbol(The description)'</span>
sym<span class="token punctuation">.</span>description <span class="token comment">// 'The description'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<h3>8）可选的 <code class="gatsby-code-text">catch</code> 绑定</h3>
<p><code class="gatsby-code-text">try...catch</code> 的语法大家都很熟悉了，过去，<code class="gatsby-code-text">catch</code> 后面必须有一组括号，里面用一个变量（通常叫 <code class="gatsby-code-text">e</code> 或者 <code class="gatsby-code-text">err</code>）代表错误信息对象。现在这部分是可选的了，如果异常处理部分不需要错误信息，我们可以把它省略，像写 <code class="gatsby-code-text">if...else</code> 一样写 <code class="gatsby-code-text">try...catch</code>。</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="gatsby-code-javascript line-numbers"><code class="gatsby-code-javascript"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Some Error'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
  <span class="token function">handleError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 这里没有用到错误信息，可以省略 catch 后面的 (e)。</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>遗憾</h2>
<p>ES 2019 收录了非常多好用的特性，但还是有很多我们非常熟悉，甚至已经用了好久的特性没能进入标准，比如：</p>
<ul>
<li>
<p>Stage 3（明年见？）</p>
<ul>
<li>Dynamic Import</li>
<li>私有属性</li>
</ul>
</li>
<li>
<p>Stage 2（加油？）</p>
<ul>
<li>装饰器</li>
</ul>
</li>
<li>
<p>Stage 1（你们慢慢讨论，我们先用为敬）</p>
<ul>
<li>Observable</li>
<li>Promise.try</li>
<li>String.prototype.replaceAll</li>
<li>do</li>
</ul>
</li>
</ul>
<p>不过这不重要，标准只是官宣，只要 Babel 支持就好，哈哈哈哈哈哈。</p></div></article></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-2019-02-11-es-2018-and-es-2019-89f","path":"/blog/2019/02/11/es2018-and-es2019"};window.dataPath="356/path---blog-2019-02-11-es-2018-and-es-2019-89-f-211-YnQyLjbdgc7nafR4DJdOOwfzI";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ad12deca84cadbbc3958.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-cfcab2d528fceeb7ca14.js"],"component---src-templates-project-detail-js":["/component---src-templates-project-detail-js-07beb23f76aaca39d0cb.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-a358ccd3d4aba212057b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-aa94cbc9caa58cc531b8.js"],"component---src-pages-about-js":["/component---src-pages-about-js-85adac62d08b80a378ce.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-853bc89ee42b08571278.js"],"component---src-pages-friend-js":["/component---src-pages-friend-js-ba58ed561fb70df1f06a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-068390f159a533a0e4b9.js"],"component---src-pages-lab-js":["/component---src-pages-lab-js-a092c58488faa3f8b5cc.js"],"component---src-pages-lab-browser-ua-js":["/component---src-pages-lab-browser-ua-js-e540b8317737570d94d6.js"],"component---src-pages-lab-browser-viewport-js":["/component---src-pages-lab-browser-viewport-js-241c8f587426276c6e9f.js"],"component---src-pages-lab-html-5-canvas-js":["/component---src-pages-lab-html-5-canvas-js-6de7c8d155e206cd8871.js"],"component---src-pages-lab-html-5-connection-js":["/component---src-pages-lab-html-5-connection-js-2866ff483226289227c5.js"],"component---src-pages-lab-html-5-geolocation-js":["/component---src-pages-lab-html-5-geolocation-js-3c86e89b23f7cb0638d2.js"],"component---src-pages-lab-html-5-input-js":["/component---src-pages-lab-html-5-input-js-2405b6a70b70075280fb.js"],"component---src-pages-lab-html-5-online-js":["/component---src-pages-lab-html-5-online-js-d00b586d4d03db5acecf.js"],"component---src-pages-project-js":["/component---src-pages-project-js-fd20029bf79ff894f59f.js"],"pages-manifest":["/pages-manifest-05640344e2b0be3f3747.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-a358ccd3d4aba212057b.js" async=""></script><script src="/1-ae7d0eb19066da87ad93.js" async=""></script><script src="/styles-a0749458ddfbc5df419f.js" async=""></script><script src="/app-ad12deca84cadbbc3958.js" async=""></script><script src="/webpack-runtime-96fbf1fe878b30336166.js" async=""></script></body></html>